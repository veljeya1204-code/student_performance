{"ast":null,"code":"var _jsxFileName = \"/Users/jeyamurugan/Downloads/student/frontend/src/dashboards/ParentDashboard.js\",\n  _s = $RefreshSig$();\n// frontend/src/dashboards/ParentDashboard.js\nimport React, { useEffect, useState } from \"react\";\nimport { parentAPI } from \"../api\"; // fixed import path\nimport \"./ParentDashboard.css\"; // use your CSS file\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ParentDashboard({\n  user,\n  onLogout\n}) {\n  _s();\n  const [children, setChildren] = useState([]);\n  const [selectedChild, setSelectedChild] = useState(null);\n  const [marks, setMarks] = useState([]);\n  const [attendance, setAttendance] = useState({\n    records: [],\n    summary: {}\n  });\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n  useEffect(() => {\n    fetchData();\n  }, []);\n  const fetchData = async () => {\n    try {\n      setError(\"\");\n      const childrenRes = await parentAPI.getMyChildren();\n      const childrenData = childrenRes.data || [];\n      setChildren(childrenData);\n      if (childrenData.length > 0) {\n        const childId = childrenData[0].id;\n        setSelectedChild(childId);\n        await loadChildData(childId);\n      }\n    } catch (error) {\n      console.error(\"Error:\", error);\n      setError(\"Failed to load data\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const loadChildData = async childId => {\n    try {\n      const [marksRes, attendanceRes] = await Promise.all([parentAPI.getChildMarks(childId), parentAPI.getChildAttendance(childId)]);\n      setMarks(marksRes.data || []);\n      setAttendance(attendanceRes.data || {\n        records: [],\n        summary: {}\n      });\n    } catch (error) {\n      console.error(\"Child data error:\", error);\n    }\n  };\n  const handleChildSelect = async childId => {\n    setSelectedChild(childId);\n    await loadChildData(childId);\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading\",\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this);\n  }\n\n  // return (\n  //   <div className=\"dashboard\">\n  //     <header className=\"dashboard-header\">\n  //       <div className=\"header-content\">\n  //         <h1>Parent Dashboard</h1>\n  //         <div className=\"user-info\">\n  //           <span>{user?.email}</span>\n  //           <button onClick={onLogout} className=\"logout-btn\">\n  //             Logout\n  //           </button>\n  //         </div>\n  //       </div>\n  //     </header>\n\n  //     {error && <div className=\"error-banner\">{error}</div>}\n\n  //     <div className=\"dashboard-content\">\n  //       <div className=\"stats-grid\">\n  //         <div className=\"stat-card\">\n  //           <h3>My Children</h3>\n  //           <div className=\"stat-value\">{children.length}</div>\n  //         </div>\n  //         <div className=\"stat-card\">\n  //           <h3>Attendance</h3>\n  //           <div className=\"stat-value\">\n  //             {selectedChild\n  //               ? `${attendance.summary?.attendance_percentage?.toFixed(1) || 0}%`\n  //               : \"—\"}\n  //           </div>\n  //         </div>\n  //         <div className=\"stat-card\">\n  //           <h3>Total Marks Entries</h3>\n  //           <div className=\"stat-value\">{marks.length}</div>\n  //         </div>\n  //       </div>\n\n  //       {/* Children Selection */}\n  //       {children.length > 0 && (\n  //         <div className=\"child-selector\">\n  //           <h2>Select Child</h2>\n  //           <div className=\"children-grid\">\n  //             {children.map((child) => (\n  //               <button\n  //                 key={child.id}\n  //                 className={`child-card ${\n  //                   selectedChild === child.id ? \"selected\" : \"\"\n  //                 }`}\n  //                 onClick={() => handleChildSelect(child.id)}\n  //               >\n  //                 <h4>{`${child.first_name} ${child.last_name}`}</h4>\n  //                 <p>{`${child.class_name}${child.section ? ` - ${child.section}` : \"\"}`}</p>\n  //                 <p>{child.relationship || \"Student\"}</p>\n  //               </button>\n  //             ))}\n  //           </div>\n  //         </div>\n  //       )}\n\n  //       {/* Children Table */}\n  //       <div className=\"marks-section\">\n  //         <h2>My Children</h2>\n  //         <div className=\"table-container\">\n  //           <table className=\"data-table\">\n  //             <thead>\n  //               <tr>\n  //                 <th>Name</th>\n  //                 <th>Class</th>\n  //                 <th>Relationship</th>\n  //               </tr>\n  //             </thead>\n  //             <tbody>\n  //               {children.map((child) => (\n  //                 <tr\n  //                   key={child.id}\n  //                   className={\n  //                     selectedChild === child.id ? \"selected-child\" : \"\"\n  //                   }\n  //                   onClick={() => handleChildSelect(child.id)}\n  //                 >\n  //                   <td>{`${child.first_name} ${child.last_name}`}</td>\n  //                   <td>{child.class_name} {child.section}</td>\n  //                   <td>{child.relationship}</td>\n  //                 </tr>\n  //               ))}\n  //             </tbody>\n  //           </table>\n  //         </div>\n  //       </div>\n\n  //       {/* Recent Marks */}\n  //       <div className=\"marks-section\">\n  //         <h2>Recent Marks {selectedChild && \" (Selected Child)\"}</h2>\n  //         <div className=\"table-container\">\n  //           <table className=\"data-table\">\n  //             <thead>\n  //               <tr>\n  //                 <th>Subject</th>\n  //                 <th>Exam Type</th>\n  //                 <th>Marks</th>\n  //                 <th>Percentage</th>\n  //                 <th>Date</th>\n  //               </tr>\n  //             </thead>\n  //             <tbody>\n  //               {marks.slice(0, 10).map((mark) => (\n  //                 <tr key={mark.id}>\n  //                   <td>{mark.subject_name}</td>\n  //                   <td>{mark.exam_type}</td>\n  //                   <td>\n  //                     {mark.marks_obtained} / {mark.max_marks}\n  //                   </td>\n  //                   <td>\n  //                     <span\n  //                       className={`percentage ${\n  //                         mark.percentage >= 50 ? \"pass\" : \"fail\"\n  //                       }`}\n  //                     >\n  //                       {mark.percentage?.toFixed(1)}%\n  //                     </span>\n  //                   </td>\n  //                   <td>\n  //                     {new Date(mark.exam_date).toLocaleDateString()}\n  //                   </td>\n  //                 </tr>\n  //               ))}\n  //             </tbody>\n  //           </table>\n  //         </div>\n  //       </div>\n  //     </div>\n  //   </div>\n  // );\n}\n_s(ParentDashboard, \"rWJKAtoVNdSenamJpRaEzmepN8w=\");\n_c = ParentDashboard;\nexport default ParentDashboard;\nvar _c;\n$RefreshReg$(_c, \"ParentDashboard\");","map":{"version":3,"names":["React","useEffect","useState","parentAPI","jsxDEV","_jsxDEV","ParentDashboard","user","onLogout","_s","children","setChildren","selectedChild","setSelectedChild","marks","setMarks","attendance","setAttendance","records","summary","loading","setLoading","error","setError","fetchData","childrenRes","getMyChildren","childrenData","data","length","childId","id","loadChildData","console","marksRes","attendanceRes","Promise","all","getChildMarks","getChildAttendance","handleChildSelect","className","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/jeyamurugan/Downloads/student/frontend/src/dashboards/ParentDashboard.js"],"sourcesContent":["// frontend/src/dashboards/ParentDashboard.js\nimport React, { useEffect, useState } from \"react\";\nimport { parentAPI } from \"../api\"; // fixed import path\nimport \"./ParentDashboard.css\"; // use your CSS file\n\nfunction ParentDashboard({ user, onLogout }) {\n  const [children, setChildren] = useState([]);\n  const [selectedChild, setSelectedChild] = useState(null);\n  const [marks, setMarks] = useState([]);\n  const [attendance, setAttendance] = useState({ records: [], summary: {} });\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  const fetchData = async () => {\n    try {\n      setError(\"\");\n      const childrenRes = await parentAPI.getMyChildren();\n      const childrenData = childrenRes.data || [];\n      setChildren(childrenData);\n\n      if (childrenData.length > 0) {\n        const childId = childrenData[0].id;\n        setSelectedChild(childId);\n        await loadChildData(childId);\n      }\n    } catch (error) {\n      console.error(\"Error:\", error);\n      setError(\"Failed to load data\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadChildData = async (childId) => {\n    try {\n      const [marksRes, attendanceRes] = await Promise.all([\n        parentAPI.getChildMarks(childId),\n        parentAPI.getChildAttendance(childId),\n      ]);\n      setMarks(marksRes.data || []);\n      setAttendance(attendanceRes.data || { records: [], summary: {} });\n    } catch (error) {\n      console.error(\"Child data error:\", error);\n    }\n  };\n\n  const handleChildSelect = async (childId) => {\n    setSelectedChild(childId);\n    await loadChildData(childId);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"dashboard\">\n        <div className=\"loading\">Loading...</div>\n      </div>\n    );\n  }\n\n  // return (\n  //   <div className=\"dashboard\">\n  //     <header className=\"dashboard-header\">\n  //       <div className=\"header-content\">\n  //         <h1>Parent Dashboard</h1>\n  //         <div className=\"user-info\">\n  //           <span>{user?.email}</span>\n  //           <button onClick={onLogout} className=\"logout-btn\">\n  //             Logout\n  //           </button>\n  //         </div>\n  //       </div>\n  //     </header>\n\n  //     {error && <div className=\"error-banner\">{error}</div>}\n\n  //     <div className=\"dashboard-content\">\n  //       <div className=\"stats-grid\">\n  //         <div className=\"stat-card\">\n  //           <h3>My Children</h3>\n  //           <div className=\"stat-value\">{children.length}</div>\n  //         </div>\n  //         <div className=\"stat-card\">\n  //           <h3>Attendance</h3>\n  //           <div className=\"stat-value\">\n  //             {selectedChild\n  //               ? `${attendance.summary?.attendance_percentage?.toFixed(1) || 0}%`\n  //               : \"—\"}\n  //           </div>\n  //         </div>\n  //         <div className=\"stat-card\">\n  //           <h3>Total Marks Entries</h3>\n  //           <div className=\"stat-value\">{marks.length}</div>\n  //         </div>\n  //       </div>\n\n  //       {/* Children Selection */}\n  //       {children.length > 0 && (\n  //         <div className=\"child-selector\">\n  //           <h2>Select Child</h2>\n  //           <div className=\"children-grid\">\n  //             {children.map((child) => (\n  //               <button\n  //                 key={child.id}\n  //                 className={`child-card ${\n  //                   selectedChild === child.id ? \"selected\" : \"\"\n  //                 }`}\n  //                 onClick={() => handleChildSelect(child.id)}\n  //               >\n  //                 <h4>{`${child.first_name} ${child.last_name}`}</h4>\n  //                 <p>{`${child.class_name}${child.section ? ` - ${child.section}` : \"\"}`}</p>\n  //                 <p>{child.relationship || \"Student\"}</p>\n  //               </button>\n  //             ))}\n  //           </div>\n  //         </div>\n  //       )}\n\n  //       {/* Children Table */}\n  //       <div className=\"marks-section\">\n  //         <h2>My Children</h2>\n  //         <div className=\"table-container\">\n  //           <table className=\"data-table\">\n  //             <thead>\n  //               <tr>\n  //                 <th>Name</th>\n  //                 <th>Class</th>\n  //                 <th>Relationship</th>\n  //               </tr>\n  //             </thead>\n  //             <tbody>\n  //               {children.map((child) => (\n  //                 <tr\n  //                   key={child.id}\n  //                   className={\n  //                     selectedChild === child.id ? \"selected-child\" : \"\"\n  //                   }\n  //                   onClick={() => handleChildSelect(child.id)}\n  //                 >\n  //                   <td>{`${child.first_name} ${child.last_name}`}</td>\n  //                   <td>{child.class_name} {child.section}</td>\n  //                   <td>{child.relationship}</td>\n  //                 </tr>\n  //               ))}\n  //             </tbody>\n  //           </table>\n  //         </div>\n  //       </div>\n\n  //       {/* Recent Marks */}\n  //       <div className=\"marks-section\">\n  //         <h2>Recent Marks {selectedChild && \" (Selected Child)\"}</h2>\n  //         <div className=\"table-container\">\n  //           <table className=\"data-table\">\n  //             <thead>\n  //               <tr>\n  //                 <th>Subject</th>\n  //                 <th>Exam Type</th>\n  //                 <th>Marks</th>\n  //                 <th>Percentage</th>\n  //                 <th>Date</th>\n  //               </tr>\n  //             </thead>\n  //             <tbody>\n  //               {marks.slice(0, 10).map((mark) => (\n  //                 <tr key={mark.id}>\n  //                   <td>{mark.subject_name}</td>\n  //                   <td>{mark.exam_type}</td>\n  //                   <td>\n  //                     {mark.marks_obtained} / {mark.max_marks}\n  //                   </td>\n  //                   <td>\n  //                     <span\n  //                       className={`percentage ${\n  //                         mark.percentage >= 50 ? \"pass\" : \"fail\"\n  //                       }`}\n  //                     >\n  //                       {mark.percentage?.toFixed(1)}%\n  //                     </span>\n  //                   </td>\n  //                   <td>\n  //                     {new Date(mark.exam_date).toLocaleDateString()}\n  //                   </td>\n  //                 </tr>\n  //               ))}\n  //             </tbody>\n  //           </table>\n  //         </div>\n  //       </div>\n  //     </div>\n  //   </div>\n  // );\n}\n\nexport default ParentDashboard;\n"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,SAAS,QAAQ,QAAQ,CAAC,CAAC;AACpC,OAAO,uBAAuB,CAAC,CAAC;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAEhC,SAASC,eAAeA,CAAC;EAAEC,IAAI;EAAEC;AAAS,CAAC,EAAE;EAAAC,EAAA;EAC3C,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACU,aAAa,EAAEC,gBAAgB,CAAC,GAAGX,QAAQ,CAAC,IAAI,CAAC;EACxD,MAAM,CAACY,KAAK,EAAEC,QAAQ,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACc,UAAU,EAAEC,aAAa,CAAC,GAAGf,QAAQ,CAAC;IAAEgB,OAAO,EAAE,EAAE;IAAEC,OAAO,EAAE,CAAC;EAAE,CAAC,CAAC;EAC1E,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGnB,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACoB,KAAK,EAAEC,QAAQ,CAAC,GAAGrB,QAAQ,CAAC,EAAE,CAAC;EAEtCD,SAAS,CAAC,MAAM;IACduB,SAAS,CAAC,CAAC;EACb,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMA,SAAS,GAAG,MAAAA,CAAA,KAAY;IAC5B,IAAI;MACFD,QAAQ,CAAC,EAAE,CAAC;MACZ,MAAME,WAAW,GAAG,MAAMtB,SAAS,CAACuB,aAAa,CAAC,CAAC;MACnD,MAAMC,YAAY,GAAGF,WAAW,CAACG,IAAI,IAAI,EAAE;MAC3CjB,WAAW,CAACgB,YAAY,CAAC;MAEzB,IAAIA,YAAY,CAACE,MAAM,GAAG,CAAC,EAAE;QAC3B,MAAMC,OAAO,GAAGH,YAAY,CAAC,CAAC,CAAC,CAACI,EAAE;QAClClB,gBAAgB,CAACiB,OAAO,CAAC;QACzB,MAAME,aAAa,CAACF,OAAO,CAAC;MAC9B;IACF,CAAC,CAAC,OAAOR,KAAK,EAAE;MACdW,OAAO,CAACX,KAAK,CAAC,QAAQ,EAAEA,KAAK,CAAC;MAC9BC,QAAQ,CAAC,qBAAqB,CAAC;IACjC,CAAC,SAAS;MACRF,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAMW,aAAa,GAAG,MAAOF,OAAO,IAAK;IACvC,IAAI;MACF,MAAM,CAACI,QAAQ,EAAEC,aAAa,CAAC,GAAG,MAAMC,OAAO,CAACC,GAAG,CAAC,CAClDlC,SAAS,CAACmC,aAAa,CAACR,OAAO,CAAC,EAChC3B,SAAS,CAACoC,kBAAkB,CAACT,OAAO,CAAC,CACtC,CAAC;MACFf,QAAQ,CAACmB,QAAQ,CAACN,IAAI,IAAI,EAAE,CAAC;MAC7BX,aAAa,CAACkB,aAAa,CAACP,IAAI,IAAI;QAAEV,OAAO,EAAE,EAAE;QAAEC,OAAO,EAAE,CAAC;MAAE,CAAC,CAAC;IACnE,CAAC,CAAC,OAAOG,KAAK,EAAE;MACdW,OAAO,CAACX,KAAK,CAAC,mBAAmB,EAAEA,KAAK,CAAC;IAC3C;EACF,CAAC;EAED,MAAMkB,iBAAiB,GAAG,MAAOV,OAAO,IAAK;IAC3CjB,gBAAgB,CAACiB,OAAO,CAAC;IACzB,MAAME,aAAa,CAACF,OAAO,CAAC;EAC9B,CAAC;EAED,IAAIV,OAAO,EAAE;IACX,oBACEf,OAAA;MAAKoC,SAAS,EAAC,WAAW;MAAA/B,QAAA,eACxBL,OAAA;QAAKoC,SAAS,EAAC,SAAS;QAAA/B,QAAA,EAAC;MAAU;QAAAgC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACtC,CAAC;EAEV;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;AACF;AAACpC,EAAA,CA9LQH,eAAe;AAAAwC,EAAA,GAAfxC,eAAe;AAgMxB,eAAeA,eAAe;AAAC,IAAAwC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}