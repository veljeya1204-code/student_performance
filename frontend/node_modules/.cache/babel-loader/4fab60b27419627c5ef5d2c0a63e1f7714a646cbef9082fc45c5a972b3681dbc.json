{"ast":null,"code":"import axios from 'axios';\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://127.0.0.1:5000/api';\nconst res = await authAPI.login(email, password);\n\n// Create axios instance\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Add token to requests\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// Handle response errors\napi.interceptors.response.use(response => response, error => {\n  var _error$response;\n  if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    window.location.href = '/login';\n  }\n  return Promise.reject(error);\n});\n\n// Auth endpoints\nexport const authAPI = {\n  login: (email, password) => api.post('/auth/login', {\n    email,\n    password\n  }),\n  getCurrentUser: () => api.get('/auth/me'),\n  changePassword: (oldPassword, newPassword) => api.post('/auth/change-password', {\n    old_password: oldPassword,\n    new_password: newPassword\n  })\n};\n\n// Admin endpoints\nexport const adminAPI = {\n  getUsers: () => api.get('/admin/users'),\n  createUser: data => api.post('/admin/users', data),\n  deleteUser: id => api.delete(`/admin/users/${id}`),\n  getStudents: () => api.get('/admin/students'),\n  createStudent: data => api.post('/admin/students', data),\n  updateStudent: (id, data) => api.put(`/admin/students/${id}`, data),\n  getTeachers: () => api.get('/admin/teachers'),\n  createTeacher: data => api.post('/admin/teachers', data),\n  getParents: () => api.get('/admin/parents'),\n  createParent: data => api.post('/admin/parents', data),\n  getClasses: () => api.get('/admin/classes'),\n  createClass: data => api.post('/admin/classes', data),\n  getSubjects: classId => api.get('/admin/subjects', {\n    params: {\n      class_id: classId\n    }\n  }),\n  createSubject: data => api.post('/admin/subjects', data)\n};\n\n// Teacher endpoints\nexport const teacherAPI = {\n  getMarks: params => api.get('/teacher/marks', {\n    params\n  }),\n  addMarks: data => api.post('/teacher/marks', data),\n  updateMarks: (id, data) => api.put(`/teacher/marks/${id}`, data),\n  deleteMarks: id => api.delete(`/teacher/marks/${id}`),\n  getAttendance: params => api.get('/teacher/attendance', {\n    params\n  }),\n  markAttendance: data => api.post('/teacher/attendance', data),\n  getAttendanceSummary: studentId => api.get(`/teacher/attendance/summary/${studentId}`),\n  getClassPerformance: classId => api.get(`/teacher/performance/class/${classId}`),\n  getSubjectPerformance: subjectId => api.get(`/teacher/performance/subject/${subjectId}`),\n  sendNotification: data => api.post('/teacher/notifications/send', data)\n};\n\n// Student endpoints\nexport const studentAPI = {\n  getMyMarks: () => api.get('/student/my-marks'),\n  getMyAttendance: () => api.get('/student/my-attendance'),\n  getMyPerformance: () => api.get('/student/my-performance'),\n  getMyNotifications: () => api.get('/student/my-notifications'),\n  markNotificationRead: id => api.put(`/student/notifications/${id}/read`)\n};\n\n// Parent endpoints\nexport const parentAPI = {\n  getMyChildren: () => api.get('/parent/my-children'),\n  getChildMarks: studentId => api.get(`/parent/child-marks/${studentId}`),\n  getChildAttendance: studentId => api.get(`/parent/child-attendance/${studentId}`),\n  getChildPerformance: studentId => api.get(`/parent/child-performance/${studentId}`),\n  getMyNotifications: () => api.get('/parent/my-notifications'),\n  markNotificationRead: id => api.put(`/student/notifications/${id}/read`)\n};\n\n// ML endpoints\nexport const mlAPI = {\n  trainModel: () => api.post('/ml/train'),\n  predictPerformance: studentId => api.get(`/ml/predict/${studentId}`),\n  getWeakStudents: () => api.get('/ml/weak-students'),\n  getClassPredictions: classId => api.get(`/ml/class-predictions/${classId}`)\n};\nexport default api;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","res","authAPI","login","email","password","api","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","error","Promise","reject","response","_error$response","status","removeItem","window","location","href","post","getCurrentUser","get","changePassword","oldPassword","newPassword","old_password","new_password","adminAPI","getUsers","createUser","data","deleteUser","id","delete","getStudents","createStudent","updateStudent","put","getTeachers","createTeacher","getParents","createParent","getClasses","createClass","getSubjects","classId","params","class_id","createSubject","teacherAPI","getMarks","addMarks","updateMarks","deleteMarks","getAttendance","markAttendance","getAttendanceSummary","studentId","getClassPerformance","getSubjectPerformance","subjectId","sendNotification","studentAPI","getMyMarks","getMyAttendance","getMyPerformance","getMyNotifications","markNotificationRead","parentAPI","getMyChildren","getChildMarks","getChildAttendance","getChildPerformance","mlAPI","trainModel","predictPerformance","getWeakStudents","getClassPredictions"],"sources":["/Users/jeyamurugan/Downloads/student/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://127.0.0.1:5000/api';\nconst res = await authAPI.login(email, password);\n\n// Create axios instance\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Add token to requests\napi.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// Handle response errors\napi.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    if (error.response?.status === 401) {\n      localStorage.removeItem('token');\n      localStorage.removeItem('user');\n      window.location.href = '/login';\n    }\n    return Promise.reject(error);\n  }\n);\n\n// Auth endpoints\nexport const authAPI = {\n  login: (email, password) => api.post('/auth/login', { email, password }),\n  getCurrentUser: () => api.get('/auth/me'),\n  changePassword: (oldPassword, newPassword) =>\n    api.post('/auth/change-password', { old_password: oldPassword, new_password: newPassword }),\n};\n\n// Admin endpoints\nexport const adminAPI = {\n  getUsers: () => api.get('/admin/users'),\n  createUser: (data) => api.post('/admin/users', data),\n  deleteUser: (id) => api.delete(`/admin/users/${id}`),\n  \n  getStudents: () => api.get('/admin/students'),\n  createStudent: (data) => api.post('/admin/students', data),\n  updateStudent: (id, data) => api.put(`/admin/students/${id}`, data),\n  \n  getTeachers: () => api.get('/admin/teachers'),\n  createTeacher: (data) => api.post('/admin/teachers', data),\n  \n  getParents: () => api.get('/admin/parents'),\n  createParent: (data) => api.post('/admin/parents', data),\n  \n  getClasses: () => api.get('/admin/classes'),\n  createClass: (data) => api.post('/admin/classes', data),\n  \n  getSubjects: (classId) => api.get('/admin/subjects', { params: { class_id: classId } }),\n  createSubject: (data) => api.post('/admin/subjects', data),\n};\n\n// Teacher endpoints\nexport const teacherAPI = {\n  getMarks: (params) => api.get('/teacher/marks', { params }),\n  addMarks: (data) => api.post('/teacher/marks', data),\n  updateMarks: (id, data) => api.put(`/teacher/marks/${id}`, data),\n  deleteMarks: (id) => api.delete(`/teacher/marks/${id}`),\n  \n  getAttendance: (params) => api.get('/teacher/attendance', { params }),\n  markAttendance: (data) => api.post('/teacher/attendance', data),\n  getAttendanceSummary: (studentId) => api.get(`/teacher/attendance/summary/${studentId}`),\n  \n  getClassPerformance: (classId) => api.get(`/teacher/performance/class/${classId}`),\n  getSubjectPerformance: (subjectId) => api.get(`/teacher/performance/subject/${subjectId}`),\n  \n  sendNotification: (data) => api.post('/teacher/notifications/send', data),\n};\n\n// Student endpoints\nexport const studentAPI = {\n  getMyMarks: () => api.get('/student/my-marks'),\n  getMyAttendance: () => api.get('/student/my-attendance'),\n  getMyPerformance: () => api.get('/student/my-performance'),\n  getMyNotifications: () => api.get('/student/my-notifications'),\n  markNotificationRead: (id) => api.put(`/student/notifications/${id}/read`),\n};\n\n// Parent endpoints\nexport const parentAPI = {\n  getMyChildren: () => api.get('/parent/my-children'),\n  getChildMarks: (studentId) => api.get(`/parent/child-marks/${studentId}`),\n  getChildAttendance: (studentId) => api.get(`/parent/child-attendance/${studentId}`),\n  getChildPerformance: (studentId) => api.get(`/parent/child-performance/${studentId}`),\n  getMyNotifications: () => api.get('/parent/my-notifications'),\n  markNotificationRead: (id) => api.put(`/student/notifications/${id}/read`),\n};\n\n// ML endpoints\nexport const mlAPI = {\n  trainModel: () => api.post('/ml/train'),\n  predictPerformance: (studentId) => api.get(`/ml/predict/${studentId}`),\n  getWeakStudents: () => api.get('/ml/weak-students'),\n  getClassPredictions: (classId) => api.get(`/ml/class-predictions/${classId}`),\n};\n\nexport default api;\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,YAAY,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,2BAA2B;AACjF,MAAMC,GAAG,GAAG,MAAMC,OAAO,CAACC,KAAK,CAACC,KAAK,EAAEC,QAAQ,CAAC;;AAEhD;AACA,MAAMC,GAAG,GAAGV,KAAK,CAACW,MAAM,CAAC;EACvBC,OAAO,EAAEX,YAAY;EACrBY,OAAO,EAAE;IACP,cAAc,EAAE;EAClB;AACF,CAAC,CAAC;;AAEF;AACAH,GAAG,CAACI,YAAY,CAACC,OAAO,CAACC,GAAG,CACzBC,MAAM,IAAK;EACV,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAIF,KAAK,EAAE;IACTD,MAAM,CAACJ,OAAO,CAACQ,aAAa,GAAG,UAAUH,KAAK,EAAE;EAClD;EACA,OAAOD,MAAM;AACf,CAAC,EACAK,KAAK,IAAK;EACT,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;;AAED;AACAZ,GAAG,CAACI,YAAY,CAACW,QAAQ,CAACT,GAAG,CAC1BS,QAAQ,IAAKA,QAAQ,EACrBH,KAAK,IAAK;EAAA,IAAAI,eAAA;EACT,IAAI,EAAAA,eAAA,GAAAJ,KAAK,CAACG,QAAQ,cAAAC,eAAA,uBAAdA,eAAA,CAAgBC,MAAM,MAAK,GAAG,EAAE;IAClCR,YAAY,CAACS,UAAU,CAAC,OAAO,CAAC;IAChCT,YAAY,CAACS,UAAU,CAAC,MAAM,CAAC;IAC/BC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;EACjC;EACA,OAAOR,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;;AAED;AACA,OAAO,MAAMhB,OAAO,GAAG;EACrBC,KAAK,EAAEA,CAACC,KAAK,EAAEC,QAAQ,KAAKC,GAAG,CAACsB,IAAI,CAAC,aAAa,EAAE;IAAExB,KAAK;IAAEC;EAAS,CAAC,CAAC;EACxEwB,cAAc,EAAEA,CAAA,KAAMvB,GAAG,CAACwB,GAAG,CAAC,UAAU,CAAC;EACzCC,cAAc,EAAEA,CAACC,WAAW,EAAEC,WAAW,KACvC3B,GAAG,CAACsB,IAAI,CAAC,uBAAuB,EAAE;IAAEM,YAAY,EAAEF,WAAW;IAAEG,YAAY,EAAEF;EAAY,CAAC;AAC9F,CAAC;;AAED;AACA,OAAO,MAAMG,QAAQ,GAAG;EACtBC,QAAQ,EAAEA,CAAA,KAAM/B,GAAG,CAACwB,GAAG,CAAC,cAAc,CAAC;EACvCQ,UAAU,EAAGC,IAAI,IAAKjC,GAAG,CAACsB,IAAI,CAAC,cAAc,EAAEW,IAAI,CAAC;EACpDC,UAAU,EAAGC,EAAE,IAAKnC,GAAG,CAACoC,MAAM,CAAC,gBAAgBD,EAAE,EAAE,CAAC;EAEpDE,WAAW,EAAEA,CAAA,KAAMrC,GAAG,CAACwB,GAAG,CAAC,iBAAiB,CAAC;EAC7Cc,aAAa,EAAGL,IAAI,IAAKjC,GAAG,CAACsB,IAAI,CAAC,iBAAiB,EAAEW,IAAI,CAAC;EAC1DM,aAAa,EAAEA,CAACJ,EAAE,EAAEF,IAAI,KAAKjC,GAAG,CAACwC,GAAG,CAAC,mBAAmBL,EAAE,EAAE,EAAEF,IAAI,CAAC;EAEnEQ,WAAW,EAAEA,CAAA,KAAMzC,GAAG,CAACwB,GAAG,CAAC,iBAAiB,CAAC;EAC7CkB,aAAa,EAAGT,IAAI,IAAKjC,GAAG,CAACsB,IAAI,CAAC,iBAAiB,EAAEW,IAAI,CAAC;EAE1DU,UAAU,EAAEA,CAAA,KAAM3C,GAAG,CAACwB,GAAG,CAAC,gBAAgB,CAAC;EAC3CoB,YAAY,EAAGX,IAAI,IAAKjC,GAAG,CAACsB,IAAI,CAAC,gBAAgB,EAAEW,IAAI,CAAC;EAExDY,UAAU,EAAEA,CAAA,KAAM7C,GAAG,CAACwB,GAAG,CAAC,gBAAgB,CAAC;EAC3CsB,WAAW,EAAGb,IAAI,IAAKjC,GAAG,CAACsB,IAAI,CAAC,gBAAgB,EAAEW,IAAI,CAAC;EAEvDc,WAAW,EAAGC,OAAO,IAAKhD,GAAG,CAACwB,GAAG,CAAC,iBAAiB,EAAE;IAAEyB,MAAM,EAAE;MAAEC,QAAQ,EAAEF;IAAQ;EAAE,CAAC,CAAC;EACvFG,aAAa,EAAGlB,IAAI,IAAKjC,GAAG,CAACsB,IAAI,CAAC,iBAAiB,EAAEW,IAAI;AAC3D,CAAC;;AAED;AACA,OAAO,MAAMmB,UAAU,GAAG;EACxBC,QAAQ,EAAGJ,MAAM,IAAKjD,GAAG,CAACwB,GAAG,CAAC,gBAAgB,EAAE;IAAEyB;EAAO,CAAC,CAAC;EAC3DK,QAAQ,EAAGrB,IAAI,IAAKjC,GAAG,CAACsB,IAAI,CAAC,gBAAgB,EAAEW,IAAI,CAAC;EACpDsB,WAAW,EAAEA,CAACpB,EAAE,EAAEF,IAAI,KAAKjC,GAAG,CAACwC,GAAG,CAAC,kBAAkBL,EAAE,EAAE,EAAEF,IAAI,CAAC;EAChEuB,WAAW,EAAGrB,EAAE,IAAKnC,GAAG,CAACoC,MAAM,CAAC,kBAAkBD,EAAE,EAAE,CAAC;EAEvDsB,aAAa,EAAGR,MAAM,IAAKjD,GAAG,CAACwB,GAAG,CAAC,qBAAqB,EAAE;IAAEyB;EAAO,CAAC,CAAC;EACrES,cAAc,EAAGzB,IAAI,IAAKjC,GAAG,CAACsB,IAAI,CAAC,qBAAqB,EAAEW,IAAI,CAAC;EAC/D0B,oBAAoB,EAAGC,SAAS,IAAK5D,GAAG,CAACwB,GAAG,CAAC,+BAA+BoC,SAAS,EAAE,CAAC;EAExFC,mBAAmB,EAAGb,OAAO,IAAKhD,GAAG,CAACwB,GAAG,CAAC,8BAA8BwB,OAAO,EAAE,CAAC;EAClFc,qBAAqB,EAAGC,SAAS,IAAK/D,GAAG,CAACwB,GAAG,CAAC,gCAAgCuC,SAAS,EAAE,CAAC;EAE1FC,gBAAgB,EAAG/B,IAAI,IAAKjC,GAAG,CAACsB,IAAI,CAAC,6BAA6B,EAAEW,IAAI;AAC1E,CAAC;;AAED;AACA,OAAO,MAAMgC,UAAU,GAAG;EACxBC,UAAU,EAAEA,CAAA,KAAMlE,GAAG,CAACwB,GAAG,CAAC,mBAAmB,CAAC;EAC9C2C,eAAe,EAAEA,CAAA,KAAMnE,GAAG,CAACwB,GAAG,CAAC,wBAAwB,CAAC;EACxD4C,gBAAgB,EAAEA,CAAA,KAAMpE,GAAG,CAACwB,GAAG,CAAC,yBAAyB,CAAC;EAC1D6C,kBAAkB,EAAEA,CAAA,KAAMrE,GAAG,CAACwB,GAAG,CAAC,2BAA2B,CAAC;EAC9D8C,oBAAoB,EAAGnC,EAAE,IAAKnC,GAAG,CAACwC,GAAG,CAAC,0BAA0BL,EAAE,OAAO;AAC3E,CAAC;;AAED;AACA,OAAO,MAAMoC,SAAS,GAAG;EACvBC,aAAa,EAAEA,CAAA,KAAMxE,GAAG,CAACwB,GAAG,CAAC,qBAAqB,CAAC;EACnDiD,aAAa,EAAGb,SAAS,IAAK5D,GAAG,CAACwB,GAAG,CAAC,uBAAuBoC,SAAS,EAAE,CAAC;EACzEc,kBAAkB,EAAGd,SAAS,IAAK5D,GAAG,CAACwB,GAAG,CAAC,4BAA4BoC,SAAS,EAAE,CAAC;EACnFe,mBAAmB,EAAGf,SAAS,IAAK5D,GAAG,CAACwB,GAAG,CAAC,6BAA6BoC,SAAS,EAAE,CAAC;EACrFS,kBAAkB,EAAEA,CAAA,KAAMrE,GAAG,CAACwB,GAAG,CAAC,0BAA0B,CAAC;EAC7D8C,oBAAoB,EAAGnC,EAAE,IAAKnC,GAAG,CAACwC,GAAG,CAAC,0BAA0BL,EAAE,OAAO;AAC3E,CAAC;;AAED;AACA,OAAO,MAAMyC,KAAK,GAAG;EACnBC,UAAU,EAAEA,CAAA,KAAM7E,GAAG,CAACsB,IAAI,CAAC,WAAW,CAAC;EACvCwD,kBAAkB,EAAGlB,SAAS,IAAK5D,GAAG,CAACwB,GAAG,CAAC,eAAeoC,SAAS,EAAE,CAAC;EACtEmB,eAAe,EAAEA,CAAA,KAAM/E,GAAG,CAACwB,GAAG,CAAC,mBAAmB,CAAC;EACnDwD,mBAAmB,EAAGhC,OAAO,IAAKhD,GAAG,CAACwB,GAAG,CAAC,yBAAyBwB,OAAO,EAAE;AAC9E,CAAC;AAED,eAAehD,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}