{"ast":null,"code":"var _jsxFileName = \"/Users/jeyamurugan/Downloads/student/frontend/src/api.js\",\n  _s = $RefreshSig$();\n// import axios from 'axios';\n\n// const API_BASE_URL = \"http://localhost:5000/api\";\n\n// const api = axios.create({\n//   baseURL: API_BASE_URL,\n//   headers: {\n//     'Content-Type': 'application/json',\n//   },\n// });\n\n// // /**\n// //  * REQUEST INTERCEPTOR\n// //  * Ensures the latest token from localStorage is attached to every request.\n// //  */\n// // api.interceptors.request.use(\n// //   (config) => {\n// //     const token = localStorage.getItem(\"token\");\n\n// //     if (token) {\n// //       // Use standard Bearer token format\n// //       config.headers.Authorization = `Bearer ${token}`;\n// //     } else {\n// //       console.warn(`No token found for request to: ${config.url}`);\n// //     }\n\n// //     return config;\n// //   },\n// //   (error) => {\n// //     return Promise.reject(error);\n// //   }\n// // );\n\n// // /**\n// //  * RESPONSE INTERCEPTOR\n// //  * Handles global error cases like 401 Unauthorized.\n// //  */\n// // api.interceptors.response.use(\n// //   (response) => response,\n// //   (error) => {\n// //     const originalRequest = error.config;\n\n// //     // Check if error is 401 and we aren't already on the login page\n// //     // This prevents a loop if the login credentials themselves are wrong\n// //     if (\n// //       error.response?.status === 401 && \n// //       !originalRequest.url.includes('/auth/login')\n// //     ) {\n// //       console.error(\"Unauthorized! Clearing session and redirecting to login...\");\n\n// //       localStorage.removeItem(\"user\");\n// //       localStorage.removeItem(\"token\");\n\n// //       // Redirect to login only if not already there\n// //       if (window.location.pathname !== '/login') {\n// //         window.location.href = \"/login\";\n// //       }\n// //     }\n\n// //     return Promise.reject(error);\n// //   }\n// // );\n\n// // // --- API ENDPOINTS ---\n\n// // // Auth endpoints\n// // export const authAPI = {\n// //   login: (email, password) => api.post('/auth/login', { email, password }),\n// //   getCurrentUser: () => api.get('/auth/me'),\n// //   changePassword: (oldPassword, newPassword) =>\n// //     api.post('/auth/change-password', { old_password: oldPassword, new_password: newPassword }),\n// // };\n\n// // // Admin endpoints\n// // export const adminAPI = {\n// //   getUsers: () => api.get('/admin/users'),\n// //   createUser: (data) => api.post('/admin/users', data),\n// //   deleteUser: (id) => api.delete(`/admin/users/${id}`),\n\n// //   getStudents: () => api.get('/admin/students'),\n// //   createStudent: (data) => api.post('/admin/students', data),\n// //   updateStudent: (id, data) => api.put(`/admin/students/${id}`, data),\n\n// //   getTeachers: () => api.get('/admin/teachers'),\n// //   createTeacher: (data) => api.post('/admin/teachers', data),\n\n// //   getParents: () => api.get('/admin/parents'),\n// //   createParent: (data) => api.post('/admin/parents', data),\n\n// //   getClasses: () => api.get('/admin/classes'),\n// //   createClass: (data) => api.post('/admin/classes', data),\n\n// //   getSubjects: (classId) => api.get('/admin/subjects', { params: { class_id: classId } }),\n// //   createSubject: (data) => api.post('/admin/subjects', data),\n// // };\n\n// // // Teacher endpoints\n// // export const teacherAPI = {\n// //   getMarks: (params) => api.get('/teacher/marks', { params }),\n// //   addMarks: (data) => api.post('/teacher/marks', data),\n// //   updateMarks: (id, data) => api.put(`/teacher/marks/${id}`, data),\n// //   deleteMarks: (id) => api.delete(`/teacher/marks/${id}`),\n\n// //   getAttendance: (params) => api.get('/teacher/attendance', { params }),\n// //   markAttendance: (data) => api.post('/teacher/attendance', data),\n// //   getAttendanceSummary: (studentId) => api.get(`/teacher/attendance/summary/${studentId}`),\n\n// //   getClassPerformance: (classId) => api.get(`/teacher/performance/class/${classId}`),\n// //   getSubjectPerformance: (subjectId) => api.get(`/teacher/performance/subject/${subjectId}`),\n\n// //   sendNotification: (data) => api.post('/teacher/notifications/send', data),\n// // };\n\n// // // Student endpoints\n// // export const studentAPI = {\n// //   getMyMarks: () => api.get('/student/my-marks'),\n// //   getMyAttendance: () => api.get('/student/my-attendance'),\n// //   getMyPerformance: () => api.get('/student/my-performance'),\n// //   getMyNotifications: () => api.get('/student/my-notifications'),\n// //   markNotificationRead: (id) => api.put(`/student/notifications/${id}/read`),\n// // };\n\n// // // Parent endpoints\n// // export const parentAPI = {\n// //   getMyChildren: () => api.get('/parent/my-children'),\n// //   getChildMarks: (studentId) => api.get(`/parent/child-marks/${studentId}`),\n// //   getChildAttendance: (studentId) => api.get(`/parent/child-attendance/${studentId}`),\n// //   getChildPerformance: (studentId) => api.get(`/parent/child-performance/${studentId}`),\n// //   getMyNotifications: () => api.get('/parent/my-notifications'),\n// //   markNotificationRead: (id) => api.put(`/parent/notifications/${id}/read`),\n// // };\n\n// // // ML endpoints\n// // export const mlAPI = {\n// //   trainModel: () => api.post('/ml/train'),\n// //   predictPerformance: (studentId) => api.get(`/ml/predict/${studentId}`),\n// //   getWeakStudents: () => api.get('/ml/weak-students'),\n// //   getClassPredictions: (classId) => api.get(`/ml/class-predictions/${classId}`),\n// // };\n\n// // export default api;\n// // import axios from 'axios';\n\n// // const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://127.0.0.1:5000/api';\n\n// // // Create axios instance\n// // const api = axios.create({\n// //   baseURL: API_BASE_URL,\n// //   headers: {\n// //     'Content-Type': 'application/json',\n// //   },\n// // });\n\n// // // Add token to requests\n// // // api.interceptors.request.use(\n// // //   (config) => {\n// // //     const token = localStorage.getItem('token');\n// // //     if (token) {\n// // //       config.headers.Authorization = `Bearer ${token}`;\n// // //     }\n// // //     return config;\n// // //   },\n// // //   (error) => Promise.reject(error)\n// // // );\n\n// // api.interceptors.request.use((config) => {\n// //   const token = localStorage.getItem(\"token\");\n\n// //   if (token) {\n// //     config.headers.Authorization = `Bearer ${token}`;\n// //   }\n\n// //   return config;\n// // });\n\n// // // Handle response errors\n// // // api.interceptors.response.use(\n// // //   (response) => response,\n// // //   (error) => {\n// // //     if (error.response?.status === 401) {\n// // //       localStorage.removeItem('token');\n// // //       localStorage.removeItem('user');\n// // //       // window.location.href = '/login';\n// // //       window.location.href = '/';\n\n// // //     }\n// // //     return Promise.reject(error);\n// // //   }\n// // // );\n// //   api.interceptors.response.use(\n// //   (response) => response,\n// //   (error) => {\n// //     const isUnauthorized = error.response?.status === 401;\n// //     const isLoginRequest = error.config?.url?.includes('/auth/login');\n\n// //     if (isUnauthorized && !isLoginRequest) {\n// //       localStorage.removeItem('token');\n// //       localStorage.removeItem('user');\n\n// //       if (window.location.pathname !== '/') {\n// //         window.location.href = '/';\n// //       }\n// //     }\n\n// //     return Promise.reject(error);\n// //   }\n// // );\n\n// // // Auth endpoints\n// // export const authAPI = {\n// //   login: (email, password) => api.post('/auth/login', { email, password }),\n// //   getCurrentUser: () => api.get('/auth/me'),\n// //   changePassword: (oldPassword, newPassword) =>\n// //     api.post('/auth/change-password', { old_password: oldPassword, new_password: newPassword }),\n// // };\n\n// // // Admin endpoints\n// // export const adminAPI = {\n// //   getUsers: () => api.get('/admin/users'),\n// //   createUser: (data) => api.post('/admin/users', data),\n// //   deleteUser: (id) => api.delete(`/admin/users/${id}`),\n\n// //   getStudents: () => api.get('/admin/students'),\n// //   createStudent: (data) => api.post('/admin/students', data),\n// //   updateStudent: (id, data) => api.put(`/admin/students/${id}`, data),\n\n// //   getTeachers: () => api.get('/admin/teachers'),\n// //   createTeacher: (data) => api.post('/admin/teachers', data),\n\n// //   getParents: () => api.get('/admin/parents'),\n// //   createParent: (data) => api.post('/admin/parents', data),\n\n// //   getClasses: () => api.get('/admin/classes'),\n// //   createClass: (data) => api.post('/admin/classes', data),\n\n// //   getSubjects: (classId) => api.get('/admin/subjects', { params: { class_id: classId } }),\n// //   createSubject: (data) => api.post('/admin/subjects', data),\n// // };\n\n// // // Teacher endpoints\n// // export const teacherAPI = {\n// //   getMarks: (params) => api.get('/teacher/marks', { params }),\n// //   addMarks: (data) => api.post('/teacher/marks', data),\n// //   updateMarks: (id, data) => api.put(`/teacher/marks/${id}`, data),\n// //   deleteMarks: (id) => api.delete(`/teacher/marks/${id}`),\n\n// //   getAttendance: (params) => api.get('/teacher/attendance', { params }),\n// //   markAttendance: (data) => api.post('/teacher/attendance', data),\n// //   getAttendanceSummary: (studentId) => api.get(`/teacher/attendance/summary/${studentId}`),\n\n// //   getClassPerformance: (classId) => api.get(`/teacher/performance/class/${classId}`),\n// //   getSubjectPerformance: (subjectId) => api.get(`/teacher/performance/subject/${subjectId}`),\n\n// //   sendNotification: (data) => api.post('/teacher/notifications/send', data),\n// // };\n\n// // // Student endpoints\n// // export const studentAPI = {\n// //   getMyMarks: () => api.get('/student/my-marks'),\n// //   getMyAttendance: () => api.get('/student/my-attendance'),\n// //   getMyPerformance: () => api.get('/student/my-performance'),\n// //   getMyNotifications: () => api.get('/student/my-notifications'),\n// //   markNotificationRead: (id) => api.put(`/student/notifications/${id}/read`),\n// // };\n\n// // // Parent endpoints\n// // export const parentAPI = {\n// //   getMyChildren: () => api.get('/parent/my-children'),\n// //   getChildMarks: (studentId) => api.get(`/parent/child-marks/${studentId}`),\n// //   getChildAttendance: (studentId) => api.get(`/parent/child-attendance/${studentId}`),\n// //   getChildPerformance: (studentId) => api.get(`/parent/child-performance/${studentId}`),\n// //   getMyNotifications: () => api.get('/parent/my-notifications'),\n// //   markNotificationRead: (id) => api.put(`/parent/notifications/${id}/read`),\n// // };\n\n// // // ML endpoints\n// // export const mlAPI = {\n// //   trainModel: () => api.post('/ml/train'),\n// //   predictPerformance: (studentId) => api.get(`/ml/predict/${studentId}`),\n// //   getWeakStudents: () => api.get('/ml/weak-students'),\n// //   getClassPredictions: (classId) => api.get(`/ml/class-predictions/${classId}`),\n// // };\n\n// // export default api;\n// // frontend/src/api.js\n// // import axios from \"axios\";\n\n// // const API_BASE_URL =\n// //   process.env.REACT_APP_API_URL || \"http://127.0.0.1:5000/api\";\n\n// // src/api.js - DEBUG VERSION (temporary)\n// api.interceptors.response.use(\n//   (response) => response,\n//   // (error) => {\n//   //   console.error('ðŸ”´ API ERROR:', {\n//   //     status: error.response?.status,\n//   //     url: error.config?.url,\n//   //     message: error.response?.data?.error || error.message\n//   //   });\n\n//   //   const isUnauthorized = error.response?.status === 401;\n//   //   const isLoginRequest = error.config?.url?.includes('/auth/login');\n\n//   //   if (isUnauthorized && !isLoginRequest) {\n//   //     console.error('ðŸš« 401 DETECTED â†’ Clearing session');\n//   //     localStorage.removeItem('token');\n//   //     localStorage.removeItem('user');\n\n//   //     if (window.location.pathname !== '/login') {\n//   //       window.location.href = '/login';\n//   //     }\n//   //   }\n\n//   //   return Promise.reject(error);\n//   // }\n// );\n\n// // Request interceptor DEBUG\n// api.interceptors.request.use((config) => {\n//   const token = localStorage.getItem(\"token\");\n//   console.log('ðŸš€ REQUEST:', config.url, \n//     token ? `Token OK (${token.slice(0,20)}...)` : 'âŒ NO TOKEN');\n\n//   if (token) {\n//     config.headers.Authorization = `Bearer ${token}`;\n//   }\n//   return config;\n// });\n\n// // // Create axios instance\n// // const api = axios.create({\n// //   baseURL: API_BASE_URL,\n// //   headers: {\n// //     \"Content-Type\": \"application/json\",\n// //   },\n// // });\n\n// // // Request interceptor â€“ attach token\n// // // api.interceptors.request.use((config) => {\n// // //   const token = localStorage.getItem(\"token\");\n// // //   console.log(`ðŸ” ${config.url} Token:`, token ? \"âœ…\" : \"âŒ\");  // DEBUG\n// // //   if (token) {\n// // //     config.headers.Authorization = `Bearer ${token}`;\n// // //   }\n// // //   return config;\n// // // });\n// // api.interceptors.request.use((config) => {\n// //   const token = localStorage.getItem(\"token\");\n// //   console.log(\"ðŸš€\", config.url, token ? \"âœ… TOKEN\" : \"âŒ NO TOKEN\");\n// //   if (token) config.headers.Authorization = `Bearer ${token}`;\n// //   return config;\n// // });\n\n// // // Response interceptor â€“ handle 401\n// // api.interceptors.response.use(\n// //   (response) => response,\n// //   (error) => {\n// //     const isUnauthorized = error.response?.status === 401;\n// //     const isLoginRequest = error.config?.url?.includes(\"/auth/login\");\n\n// //     if (isUnauthorized && !isLoginRequest) {\n// //       localStorage.removeItem(\"token\");\n// //       localStorage.removeItem(\"user\");\n// //       if (window.location.pathname !== \"/\") {\n// //         window.location.href = \"/\";\n// //       }\n// //     }\n// //     return Promise.reject(error);\n// //   }\n// // );\n\n// // ===== Auth endpoints =====\n// export const authAPI = {\n//   login: (email, password) => api.post(\"/auth/login\", { email, password }),\n//   getCurrentUser: () => api.get(\"/auth/me\"),\n//   changePassword: (oldPassword, newPassword) =>\n//     api.post(\"/auth/change-password\", {\n//       old_password: oldPassword,\n//       new_password: newPassword,\n//     }),\n// };\n\n// // ===== Admin endpoints =====\n// // export const adminAPI = {\n// //   getUsers: () => api.get(\"/admin/users\"),\n// //   createUser: (data) => api.post(\"/admin/users\", data),\n// //   deleteUser: (id) => api.delete(`/admin/users/${id}`),\n\n// //   getStudents: () => api.get(\"/admin/students\"),\n// //   createStudent: (data) => api.post(\"/admin/students\", data),\n// //   updateStudent: (id, data) => api.put(`/admin/students/${id}`, data),\n\n// //   getTeachers: () => api.get(\"/admin/teachers\"),\n// //   createTeacher: (data) => api.post(\"/admin/teachers\", data),\n\n// //   getParents: () => api.get(\"/admin/parents\"),\n// //   createParent: (data) => api.post(\"/admin/parents\", data),\n\n// //   getClasses: () => api.get(\"/admin/classes\"),\n// //   createClass: (data) => api.post(\"/admin/classes\", data),\n\n// //   getSubjects: (classId) =>\n// //     api.get(\"/admin/subjects\", { params: { class_id: classId } }),\n// //   createSubject: (data) => api.post(\"/admin/subjects\", data),\n// // };\n// // Add these CRUD methods\n// export const adminAPI = {\n//   // ... existing GET methods\n//   getUsers: () => api.get(\"/admin/users\"),\n//   createUser: (data) => api.post(\"/admin/users\", data),\n//   deleteUser: (id) => api.delete(`/admin/users/${id}`),\n\n//   getStudents: () => api.get(\"/admin/students\"),\n//   createStudent: (data) => api.post(\"/admin/students\", data),\n//   updateStudent: (id, data) => api.put(`/admin/students/${id}`, data),\n\n//   getTeachers: () => api.get(\"/admin/teachers\"),\n//   createTeacher: (data) => api.post(\"/admin/teachers\", data),\n\n//   getParents: () => api.get(\"/admin/parents\"),\n//   createParent: (data) => api.post(\"/admin/parents\", data),\n\n//   getClasses: () => api.get(\"/admin/classes\"),\n//   createClass: (data) => api.post(\"/admin/classes\", data),\n\n//   getSubjects: (classId) =>\n//     api.get(\"/admin/subjects\", { params: { class_id: classId } }),\n//   createSubject: (data) => api.post(\"/admin/subjects\", data),\n\n//   // CREATE\n//   createStudent: (data) => api.post('/admin/students', data),\n//   createTeacher: (data) => api.post('/admin/teachers', data),\n//   createParent: (data) => api.post('/admin/parents', data),\n//   createClass: (data) => api.post('/admin/classes', data),\n\n//   // UPDATE\n//   updateStudent: (id, data) => api.put(`/admin/students/${id}`, data),\n//   updateTeacher: (id, data) => api.put(`/admin/teachers/${id}`, data),\n//   updateParent: (id, data) => api.put(`/admin/parents/${id}`, data),\n//   updateClass: (id, data) => api.put(`/admin/classes/${id}`, data),\n\n//   // DELETE\n//   deleteStudent: (id) => api.delete(`/admin/students/${id}`),\n//   deleteTeacher: (id) => api.delete(`/admin/teachers/${id}`),\n//   deleteParent: (id) => api.delete(`/admin/parents/${id}`),\n//   deleteClass: (id) => api.delete(`/admin/classes/${id}`),\n// };\n\n// // ===== Teacher endpoints =====\n// export const teacherAPI = {\n//   getMarks: (params) => api.get(\"/teacher/marks\", { params }),\n//   addMarks: (data) => api.post(\"/teacher/marks\", data),\n//   updateMarks: (id, data) => api.put(`/teacher/marks/${id}`, data),\n//   deleteMarks: (id) => api.delete(`/teacher/marks/${id}`),\n\n//   getAttendance: (params) => api.get(\"/teacher/attendance\", { params }),\n//   markAttendance: (data) => api.post(\"/teacher/attendance\", data),\n//   getAttendanceSummary: (studentId) =>\n//     api.get(`/teacher/attendance/summary/${studentId}`),\n\n//   getClassPerformance: (classId) =>\n//     api.get(`/teacher/performance/class/${classId}`),\n//   getSubjectPerformance: (subjectId) =>\n//     api.get(`/teacher/performance/subject/${subjectId}`),\n\n//   sendNotification: (data) => api.post(\"/teacher/notifications/send\", data),\n// };\n\n// // ===== Student endpoints =====\n// export const studentAPI = {\n//   getMyMarks: () => api.get(\"/student/my-marks\"),\n//   getMyAttendance: () => api.get(\"/student/my-attendance\"),\n//   getMyPerformance: () => api.get(\"/student/my-performance\"),\n//   getMyNotifications: () => api.get(\"/student/my-notifications\"),\n//   markNotificationRead: (id) =>\n//     api.put(`/student/notifications/${id}/read`),\n// };\n\n// // ===== Parent endpoints =====\n// export const parentAPI = {\n//   getMyChildren: () => api.get(\"/parent/my-children\"),\n//   getChildMarks: (studentId) =>\n//     api.get(`/parent/child-marks/${studentId}`),\n//   getChildAttendance: (studentId) =>\n//     api.get(`/parent/child-attendance/${studentId}`),\n//   getChildPerformance: (studentId) =>\n//     api.get(`/parent/child-performance/${studentId}`),\n//   getMyNotifications: () => api.get(\"/parent/my-notifications\"),\n//   markNotificationRead: (id) =>\n//     api.put(`/parent/notifications/${id}/read`),\n// };\n\n// // ===== ML endpoints =====\n// export const mlAPI = {\n//   trainModel: () => api.post(\"/ml/train\"),\n//   predictPerformance: (studentId) =>\n//     api.get(`/ml/predict/${studentId}`),\n//   getWeakStudents: () => api.get(\"/ml/weak-students\"),\n//   getClassPredictions: (classId) =>\n//     api.get(`/ml/class-predictions/${classId}`),\n// };\n\n// export default api;\n\nimport React, { useEffect, useState } from \"react\";\nimport { adminAPI } from \"../api\";\nimport \"./AdminDashboard.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction AdminDashboard({\n  user,\n  onLogout\n}) {\n  _s();\n  const [tab, setTab] = useState(\"overview\");\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n  const [students, setStudents] = useState([]);\n  const [teachers, setTeachers] = useState([]);\n  const [parents, setParents] = useState([]);\n  const [classes, setClasses] = useState([]);\n  const [editingId, setEditingId] = useState(null);\n  const [editForm, setEditForm] = useState({});\n  const [showCreate, setShowCreate] = useState(null);\n  const [createForm, setCreateForm] = useState({});\n  const [confirmDialog, setConfirmDialog] = useState({\n    show: false,\n    onConfirm: null\n  });\n\n  // ================= LOAD DATA =================\n  const loadData = async () => {\n    try {\n      setLoading(true);\n      const [s, t, p, c] = await Promise.all([adminAPI.getStudents(), adminAPI.getTeachers(), adminAPI.getParents(), adminAPI.getClasses()]);\n      setStudents(s.data || []);\n      setTeachers(t.data || []);\n      setParents(p.data || []);\n      setClasses(c.data || []);\n      setError(\"\");\n    } catch (err) {\n      setError(\"Failed to load admin data\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    loadData();\n  }, []);\n\n  // ================= EDIT =================\n  const startEdit = item => {\n    setEditingId(item.id);\n    setEditForm(item);\n  };\n  const saveEdit = async updateFn => {\n    try {\n      await updateFn(editingId, editForm);\n      setEditingId(null);\n      loadData();\n    } catch {\n      setError(\"Update failed\");\n    }\n  };\n\n  // ================= DELETE =================\n  const confirmDelete = (deleteFn, id) => {\n    setConfirmDialog({\n      show: true,\n      onConfirm: async () => {\n        await deleteFn(id);\n        setConfirmDialog({\n          show: false,\n          onConfirm: null\n        });\n        loadData();\n      }\n    });\n  };\n\n  // ================= CREATE =================\n  const handleCreate = async createFn => {\n    try {\n      await createFn(createForm);\n      setShowCreate(null);\n      setCreateForm({});\n      loadData();\n    } catch {\n      setError(\"Create failed\");\n    }\n  };\n\n  // ================= TABLE RENDER =================\n  const renderTable = (data, type) => {\n    const apiMap = {\n      students: {\n        update: adminAPI.updateStudent,\n        delete: adminAPI.deleteStudent,\n        create: adminAPI.createStudent\n      },\n      teachers: {\n        update: adminAPI.updateTeacher,\n        delete: adminAPI.deleteTeacher,\n        create: adminAPI.createTeacher\n      },\n      parents: {\n        update: adminAPI.updateParent,\n        delete: adminAPI.deleteParent,\n        create: adminAPI.createParent\n      },\n      classes: {\n        update: adminAPI.updateClass,\n        delete: adminAPI.deleteClass,\n        create: adminAPI.createClass\n      }\n    };\n    if (!data.length) return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No data found\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 628,\n      columnNumber: 30\n    }, this);\n    const keys = Object.keys(data[0]).filter(k => k !== \"password_hash\");\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"table-header\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          onClick: () => setShowCreate(type),\n          children: [\"\\u2795 Add \", type.slice(0, -1)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 635,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 634,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"data-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [keys.map(k => /*#__PURE__*/_jsxDEV(\"th\", {\n              children: k\n            }, k, false, {\n              fileName: _jsxFileName,\n              lineNumber: 646,\n              columnNumber: 30\n            }, this)), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Actions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 647,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 645,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 644,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: data.map(row => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [keys.map(k => /*#__PURE__*/_jsxDEV(\"td\", {\n              children: editingId === row.id ? /*#__PURE__*/_jsxDEV(\"input\", {\n                value: editForm[k] || \"\",\n                onChange: e => setEditForm({\n                  ...editForm,\n                  [k]: e.target.value\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 656,\n                columnNumber: 23\n              }, this) : Array.isArray(row[k]) ? JSON.stringify(row[k]) : row[k]\n            }, k, false, {\n              fileName: _jsxFileName,\n              lineNumber: 654,\n              columnNumber: 19\n            }, this)), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: editingId === row.id ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-success btn-sm\",\n                  onClick: () => saveEdit(apiMap[type].update),\n                  children: \"Save\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 672,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-secondary btn-sm\",\n                  onClick: () => setEditingId(null),\n                  children: \"Cancel\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 678,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-warning btn-sm\",\n                  onClick: () => startEdit(row),\n                  children: \"Edit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 687,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-danger btn-sm\",\n                  onClick: () => confirmDelete(apiMap[type].delete, row.id),\n                  children: \"Delete\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 693,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 669,\n              columnNumber: 17\n            }, this)]\n          }, row.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 652,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 650,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 643,\n        columnNumber: 9\n      }, this), showCreate === type && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-overlay\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [\"Create \", type.slice(0, -1)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 712,\n            columnNumber: 15\n          }, this), keys.map(k => /*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: k,\n            value: createForm[k] || \"\",\n            onChange: e => setCreateForm({\n              ...createForm,\n              [k]: e.target.value\n            })\n          }, k, false, {\n            fileName: _jsxFileName,\n            lineNumber: 714,\n            columnNumber: 17\n          }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-actions\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-primary\",\n              onClick: () => handleCreate(apiMap[type].create),\n              children: \"Create\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 724,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-secondary\",\n              onClick: () => setShowCreate(null),\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 730,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 723,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 711,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 710,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true);\n  };\n\n  // ================= LOADING =================\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard-container\",\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 745,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Admin Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 750,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: user === null || user === void 0 ? void 0 : user.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 752,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-secondary\",\n          onClick: onLogout,\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 753,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 751,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 749,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-banner\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 759,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard-tabs\",\n      children: [\"overview\", \"students\", \"teachers\", \"parents\", \"classes\"].map(t => /*#__PURE__*/_jsxDEV(\"button\", {\n        className: tab === t ? \"tab active\" : \"tab\",\n        onClick: () => setTab(t),\n        children: t\n      }, t, false, {\n        fileName: _jsxFileName,\n        lineNumber: 763,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 761,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard-content\",\n      children: [tab === \"overview\" && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overview-grid\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"Total Students: \", students.length]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 776,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"Total Teachers: \", teachers.length]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 777,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"Total Parents: \", parents.length]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 778,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"Total Classes: \", classes.length]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 779,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 775,\n        columnNumber: 11\n      }, this), tab === \"students\" && renderTable(students, \"students\"), tab === \"teachers\" && renderTable(teachers, \"teachers\"), tab === \"parents\" && renderTable(parents, \"parents\"), tab === \"classes\" && renderTable(classes, \"classes\")]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 773,\n      columnNumber: 7\n    }, this), confirmDialog.show && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Confirm Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 792,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-danger\",\n          onClick: confirmDialog.onConfirm,\n          children: \"Yes Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 793,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-secondary\",\n          onClick: () => setConfirmDialog({\n            show: false\n          }),\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 799,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 791,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 790,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 748,\n    columnNumber: 5\n  }, this);\n}\n_s(AdminDashboard, \"25eT/MCeGtMokZzOxy2iEJYzgfE=\");\n_c = AdminDashboard;\nexport default AdminDashboard;\nvar _c;\n$RefreshReg$(_c, \"AdminDashboard\");","map":{"version":3,"names":["React","useEffect","useState","adminAPI","jsxDEV","_jsxDEV","Fragment","_Fragment","AdminDashboard","user","onLogout","_s","tab","setTab","loading","setLoading","error","setError","students","setStudents","teachers","setTeachers","parents","setParents","classes","setClasses","editingId","setEditingId","editForm","setEditForm","showCreate","setShowCreate","createForm","setCreateForm","confirmDialog","setConfirmDialog","show","onConfirm","loadData","s","t","p","c","Promise","all","getStudents","getTeachers","getParents","getClasses","data","err","startEdit","item","id","saveEdit","updateFn","confirmDelete","deleteFn","handleCreate","createFn","renderTable","type","apiMap","update","updateStudent","delete","deleteStudent","create","createStudent","updateTeacher","deleteTeacher","createTeacher","updateParent","deleteParent","createParent","updateClass","deleteClass","createClass","length","children","fileName","_jsxFileName","lineNumber","columnNumber","keys","Object","filter","k","className","onClick","slice","map","row","value","onChange","e","target","Array","isArray","JSON","stringify","placeholder","email","_c","$RefreshReg$"],"sources":["/Users/jeyamurugan/Downloads/student/frontend/src/api.js"],"sourcesContent":["// import axios from 'axios';\n\n// const API_BASE_URL = \"http://localhost:5000/api\";\n\n// const api = axios.create({\n//   baseURL: API_BASE_URL,\n//   headers: {\n//     'Content-Type': 'application/json',\n//   },\n// });\n\n// // /**\n// //  * REQUEST INTERCEPTOR\n// //  * Ensures the latest token from localStorage is attached to every request.\n// //  */\n// // api.interceptors.request.use(\n// //   (config) => {\n// //     const token = localStorage.getItem(\"token\");\n\n// //     if (token) {\n// //       // Use standard Bearer token format\n// //       config.headers.Authorization = `Bearer ${token}`;\n// //     } else {\n// //       console.warn(`No token found for request to: ${config.url}`);\n// //     }\n\n// //     return config;\n// //   },\n// //   (error) => {\n// //     return Promise.reject(error);\n// //   }\n// // );\n\n// // /**\n// //  * RESPONSE INTERCEPTOR\n// //  * Handles global error cases like 401 Unauthorized.\n// //  */\n// // api.interceptors.response.use(\n// //   (response) => response,\n// //   (error) => {\n// //     const originalRequest = error.config;\n\n// //     // Check if error is 401 and we aren't already on the login page\n// //     // This prevents a loop if the login credentials themselves are wrong\n// //     if (\n// //       error.response?.status === 401 && \n// //       !originalRequest.url.includes('/auth/login')\n// //     ) {\n// //       console.error(\"Unauthorized! Clearing session and redirecting to login...\");\n      \n// //       localStorage.removeItem(\"user\");\n// //       localStorage.removeItem(\"token\");\n      \n// //       // Redirect to login only if not already there\n// //       if (window.location.pathname !== '/login') {\n// //         window.location.href = \"/login\";\n// //       }\n// //     }\n    \n// //     return Promise.reject(error);\n// //   }\n// // );\n\n// // // --- API ENDPOINTS ---\n\n// // // Auth endpoints\n// // export const authAPI = {\n// //   login: (email, password) => api.post('/auth/login', { email, password }),\n// //   getCurrentUser: () => api.get('/auth/me'),\n// //   changePassword: (oldPassword, newPassword) =>\n// //     api.post('/auth/change-password', { old_password: oldPassword, new_password: newPassword }),\n// // };\n\n// // // Admin endpoints\n// // export const adminAPI = {\n// //   getUsers: () => api.get('/admin/users'),\n// //   createUser: (data) => api.post('/admin/users', data),\n// //   deleteUser: (id) => api.delete(`/admin/users/${id}`),\n  \n// //   getStudents: () => api.get('/admin/students'),\n// //   createStudent: (data) => api.post('/admin/students', data),\n// //   updateStudent: (id, data) => api.put(`/admin/students/${id}`, data),\n  \n// //   getTeachers: () => api.get('/admin/teachers'),\n// //   createTeacher: (data) => api.post('/admin/teachers', data),\n  \n// //   getParents: () => api.get('/admin/parents'),\n// //   createParent: (data) => api.post('/admin/parents', data),\n  \n// //   getClasses: () => api.get('/admin/classes'),\n// //   createClass: (data) => api.post('/admin/classes', data),\n  \n// //   getSubjects: (classId) => api.get('/admin/subjects', { params: { class_id: classId } }),\n// //   createSubject: (data) => api.post('/admin/subjects', data),\n// // };\n\n// // // Teacher endpoints\n// // export const teacherAPI = {\n// //   getMarks: (params) => api.get('/teacher/marks', { params }),\n// //   addMarks: (data) => api.post('/teacher/marks', data),\n// //   updateMarks: (id, data) => api.put(`/teacher/marks/${id}`, data),\n// //   deleteMarks: (id) => api.delete(`/teacher/marks/${id}`),\n  \n// //   getAttendance: (params) => api.get('/teacher/attendance', { params }),\n// //   markAttendance: (data) => api.post('/teacher/attendance', data),\n// //   getAttendanceSummary: (studentId) => api.get(`/teacher/attendance/summary/${studentId}`),\n  \n// //   getClassPerformance: (classId) => api.get(`/teacher/performance/class/${classId}`),\n// //   getSubjectPerformance: (subjectId) => api.get(`/teacher/performance/subject/${subjectId}`),\n  \n// //   sendNotification: (data) => api.post('/teacher/notifications/send', data),\n// // };\n\n// // // Student endpoints\n// // export const studentAPI = {\n// //   getMyMarks: () => api.get('/student/my-marks'),\n// //   getMyAttendance: () => api.get('/student/my-attendance'),\n// //   getMyPerformance: () => api.get('/student/my-performance'),\n// //   getMyNotifications: () => api.get('/student/my-notifications'),\n// //   markNotificationRead: (id) => api.put(`/student/notifications/${id}/read`),\n// // };\n\n// // // Parent endpoints\n// // export const parentAPI = {\n// //   getMyChildren: () => api.get('/parent/my-children'),\n// //   getChildMarks: (studentId) => api.get(`/parent/child-marks/${studentId}`),\n// //   getChildAttendance: (studentId) => api.get(`/parent/child-attendance/${studentId}`),\n// //   getChildPerformance: (studentId) => api.get(`/parent/child-performance/${studentId}`),\n// //   getMyNotifications: () => api.get('/parent/my-notifications'),\n// //   markNotificationRead: (id) => api.put(`/parent/notifications/${id}/read`),\n// // };\n\n// // // ML endpoints\n// // export const mlAPI = {\n// //   trainModel: () => api.post('/ml/train'),\n// //   predictPerformance: (studentId) => api.get(`/ml/predict/${studentId}`),\n// //   getWeakStudents: () => api.get('/ml/weak-students'),\n// //   getClassPredictions: (classId) => api.get(`/ml/class-predictions/${classId}`),\n// // };\n\n// // export default api;\n// // import axios from 'axios';\n\n// // const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://127.0.0.1:5000/api';\n\n// // // Create axios instance\n// // const api = axios.create({\n// //   baseURL: API_BASE_URL,\n// //   headers: {\n// //     'Content-Type': 'application/json',\n// //   },\n// // });\n\n// // // Add token to requests\n// // // api.interceptors.request.use(\n// // //   (config) => {\n// // //     const token = localStorage.getItem('token');\n// // //     if (token) {\n// // //       config.headers.Authorization = `Bearer ${token}`;\n// // //     }\n// // //     return config;\n// // //   },\n// // //   (error) => Promise.reject(error)\n// // // );\n\n// // api.interceptors.request.use((config) => {\n// //   const token = localStorage.getItem(\"token\");\n\n// //   if (token) {\n// //     config.headers.Authorization = `Bearer ${token}`;\n// //   }\n\n// //   return config;\n// // });\n\n// // // Handle response errors\n// // // api.interceptors.response.use(\n// // //   (response) => response,\n// // //   (error) => {\n// // //     if (error.response?.status === 401) {\n// // //       localStorage.removeItem('token');\n// // //       localStorage.removeItem('user');\n// // //       // window.location.href = '/login';\n// // //       window.location.href = '/';\n\n// // //     }\n// // //     return Promise.reject(error);\n// // //   }\n// // // );\n// //   api.interceptors.response.use(\n// //   (response) => response,\n// //   (error) => {\n// //     const isUnauthorized = error.response?.status === 401;\n// //     const isLoginRequest = error.config?.url?.includes('/auth/login');\n\n// //     if (isUnauthorized && !isLoginRequest) {\n// //       localStorage.removeItem('token');\n// //       localStorage.removeItem('user');\n\n// //       if (window.location.pathname !== '/') {\n// //         window.location.href = '/';\n// //       }\n// //     }\n\n// //     return Promise.reject(error);\n// //   }\n// // );\n\n\n// // // Auth endpoints\n// // export const authAPI = {\n// //   login: (email, password) => api.post('/auth/login', { email, password }),\n// //   getCurrentUser: () => api.get('/auth/me'),\n// //   changePassword: (oldPassword, newPassword) =>\n// //     api.post('/auth/change-password', { old_password: oldPassword, new_password: newPassword }),\n// // };\n\n// // // Admin endpoints\n// // export const adminAPI = {\n// //   getUsers: () => api.get('/admin/users'),\n// //   createUser: (data) => api.post('/admin/users', data),\n// //   deleteUser: (id) => api.delete(`/admin/users/${id}`),\n  \n// //   getStudents: () => api.get('/admin/students'),\n// //   createStudent: (data) => api.post('/admin/students', data),\n// //   updateStudent: (id, data) => api.put(`/admin/students/${id}`, data),\n  \n// //   getTeachers: () => api.get('/admin/teachers'),\n// //   createTeacher: (data) => api.post('/admin/teachers', data),\n  \n// //   getParents: () => api.get('/admin/parents'),\n// //   createParent: (data) => api.post('/admin/parents', data),\n  \n// //   getClasses: () => api.get('/admin/classes'),\n// //   createClass: (data) => api.post('/admin/classes', data),\n  \n// //   getSubjects: (classId) => api.get('/admin/subjects', { params: { class_id: classId } }),\n// //   createSubject: (data) => api.post('/admin/subjects', data),\n// // };\n\n// // // Teacher endpoints\n// // export const teacherAPI = {\n// //   getMarks: (params) => api.get('/teacher/marks', { params }),\n// //   addMarks: (data) => api.post('/teacher/marks', data),\n// //   updateMarks: (id, data) => api.put(`/teacher/marks/${id}`, data),\n// //   deleteMarks: (id) => api.delete(`/teacher/marks/${id}`),\n  \n// //   getAttendance: (params) => api.get('/teacher/attendance', { params }),\n// //   markAttendance: (data) => api.post('/teacher/attendance', data),\n// //   getAttendanceSummary: (studentId) => api.get(`/teacher/attendance/summary/${studentId}`),\n  \n// //   getClassPerformance: (classId) => api.get(`/teacher/performance/class/${classId}`),\n// //   getSubjectPerformance: (subjectId) => api.get(`/teacher/performance/subject/${subjectId}`),\n  \n// //   sendNotification: (data) => api.post('/teacher/notifications/send', data),\n// // };\n\n// // // Student endpoints\n// // export const studentAPI = {\n// //   getMyMarks: () => api.get('/student/my-marks'),\n// //   getMyAttendance: () => api.get('/student/my-attendance'),\n// //   getMyPerformance: () => api.get('/student/my-performance'),\n// //   getMyNotifications: () => api.get('/student/my-notifications'),\n// //   markNotificationRead: (id) => api.put(`/student/notifications/${id}/read`),\n// // };\n\n// // // Parent endpoints\n// // export const parentAPI = {\n// //   getMyChildren: () => api.get('/parent/my-children'),\n// //   getChildMarks: (studentId) => api.get(`/parent/child-marks/${studentId}`),\n// //   getChildAttendance: (studentId) => api.get(`/parent/child-attendance/${studentId}`),\n// //   getChildPerformance: (studentId) => api.get(`/parent/child-performance/${studentId}`),\n// //   getMyNotifications: () => api.get('/parent/my-notifications'),\n// //   markNotificationRead: (id) => api.put(`/parent/notifications/${id}/read`),\n// // };\n\n// // // ML endpoints\n// // export const mlAPI = {\n// //   trainModel: () => api.post('/ml/train'),\n// //   predictPerformance: (studentId) => api.get(`/ml/predict/${studentId}`),\n// //   getWeakStudents: () => api.get('/ml/weak-students'),\n// //   getClassPredictions: (classId) => api.get(`/ml/class-predictions/${classId}`),\n// // };\n\n// // export default api;\n// // frontend/src/api.js\n// // import axios from \"axios\";\n\n// // const API_BASE_URL =\n// //   process.env.REACT_APP_API_URL || \"http://127.0.0.1:5000/api\";\n\n// // src/api.js - DEBUG VERSION (temporary)\n// api.interceptors.response.use(\n//   (response) => response,\n//   // (error) => {\n//   //   console.error('ðŸ”´ API ERROR:', {\n//   //     status: error.response?.status,\n//   //     url: error.config?.url,\n//   //     message: error.response?.data?.error || error.message\n//   //   });\n    \n//   //   const isUnauthorized = error.response?.status === 401;\n//   //   const isLoginRequest = error.config?.url?.includes('/auth/login');\n    \n//   //   if (isUnauthorized && !isLoginRequest) {\n//   //     console.error('ðŸš« 401 DETECTED â†’ Clearing session');\n//   //     localStorage.removeItem('token');\n//   //     localStorage.removeItem('user');\n      \n//   //     if (window.location.pathname !== '/login') {\n//   //       window.location.href = '/login';\n//   //     }\n//   //   }\n    \n//   //   return Promise.reject(error);\n//   // }\n// );\n\n// // Request interceptor DEBUG\n// api.interceptors.request.use((config) => {\n//   const token = localStorage.getItem(\"token\");\n//   console.log('ðŸš€ REQUEST:', config.url, \n//     token ? `Token OK (${token.slice(0,20)}...)` : 'âŒ NO TOKEN');\n  \n//   if (token) {\n//     config.headers.Authorization = `Bearer ${token}`;\n//   }\n//   return config;\n// });\n\n\n\n// // // Create axios instance\n// // const api = axios.create({\n// //   baseURL: API_BASE_URL,\n// //   headers: {\n// //     \"Content-Type\": \"application/json\",\n// //   },\n// // });\n\n// // // Request interceptor â€“ attach token\n// // // api.interceptors.request.use((config) => {\n// // //   const token = localStorage.getItem(\"token\");\n// // //   console.log(`ðŸ” ${config.url} Token:`, token ? \"âœ…\" : \"âŒ\");  // DEBUG\n// // //   if (token) {\n// // //     config.headers.Authorization = `Bearer ${token}`;\n// // //   }\n// // //   return config;\n// // // });\n// // api.interceptors.request.use((config) => {\n// //   const token = localStorage.getItem(\"token\");\n// //   console.log(\"ðŸš€\", config.url, token ? \"âœ… TOKEN\" : \"âŒ NO TOKEN\");\n// //   if (token) config.headers.Authorization = `Bearer ${token}`;\n// //   return config;\n// // });\n\n\n// // // Response interceptor â€“ handle 401\n// // api.interceptors.response.use(\n// //   (response) => response,\n// //   (error) => {\n// //     const isUnauthorized = error.response?.status === 401;\n// //     const isLoginRequest = error.config?.url?.includes(\"/auth/login\");\n\n// //     if (isUnauthorized && !isLoginRequest) {\n// //       localStorage.removeItem(\"token\");\n// //       localStorage.removeItem(\"user\");\n// //       if (window.location.pathname !== \"/\") {\n// //         window.location.href = \"/\";\n// //       }\n// //     }\n// //     return Promise.reject(error);\n// //   }\n// // );\n\n// // ===== Auth endpoints =====\n// export const authAPI = {\n//   login: (email, password) => api.post(\"/auth/login\", { email, password }),\n//   getCurrentUser: () => api.get(\"/auth/me\"),\n//   changePassword: (oldPassword, newPassword) =>\n//     api.post(\"/auth/change-password\", {\n//       old_password: oldPassword,\n//       new_password: newPassword,\n//     }),\n// };\n\n// // ===== Admin endpoints =====\n// // export const adminAPI = {\n// //   getUsers: () => api.get(\"/admin/users\"),\n// //   createUser: (data) => api.post(\"/admin/users\", data),\n// //   deleteUser: (id) => api.delete(`/admin/users/${id}`),\n\n// //   getStudents: () => api.get(\"/admin/students\"),\n// //   createStudent: (data) => api.post(\"/admin/students\", data),\n// //   updateStudent: (id, data) => api.put(`/admin/students/${id}`, data),\n\n// //   getTeachers: () => api.get(\"/admin/teachers\"),\n// //   createTeacher: (data) => api.post(\"/admin/teachers\", data),\n\n// //   getParents: () => api.get(\"/admin/parents\"),\n// //   createParent: (data) => api.post(\"/admin/parents\", data),\n\n// //   getClasses: () => api.get(\"/admin/classes\"),\n// //   createClass: (data) => api.post(\"/admin/classes\", data),\n\n// //   getSubjects: (classId) =>\n// //     api.get(\"/admin/subjects\", { params: { class_id: classId } }),\n// //   createSubject: (data) => api.post(\"/admin/subjects\", data),\n// // };\n// // Add these CRUD methods\n// export const adminAPI = {\n//   // ... existing GET methods\n//   getUsers: () => api.get(\"/admin/users\"),\n//   createUser: (data) => api.post(\"/admin/users\", data),\n//   deleteUser: (id) => api.delete(`/admin/users/${id}`),\n\n//   getStudents: () => api.get(\"/admin/students\"),\n//   createStudent: (data) => api.post(\"/admin/students\", data),\n//   updateStudent: (id, data) => api.put(`/admin/students/${id}`, data),\n\n//   getTeachers: () => api.get(\"/admin/teachers\"),\n//   createTeacher: (data) => api.post(\"/admin/teachers\", data),\n\n//   getParents: () => api.get(\"/admin/parents\"),\n//   createParent: (data) => api.post(\"/admin/parents\", data),\n\n//   getClasses: () => api.get(\"/admin/classes\"),\n//   createClass: (data) => api.post(\"/admin/classes\", data),\n\n//   getSubjects: (classId) =>\n//     api.get(\"/admin/subjects\", { params: { class_id: classId } }),\n//   createSubject: (data) => api.post(\"/admin/subjects\", data),\n  \n//   // CREATE\n//   createStudent: (data) => api.post('/admin/students', data),\n//   createTeacher: (data) => api.post('/admin/teachers', data),\n//   createParent: (data) => api.post('/admin/parents', data),\n//   createClass: (data) => api.post('/admin/classes', data),\n  \n//   // UPDATE\n//   updateStudent: (id, data) => api.put(`/admin/students/${id}`, data),\n//   updateTeacher: (id, data) => api.put(`/admin/teachers/${id}`, data),\n//   updateParent: (id, data) => api.put(`/admin/parents/${id}`, data),\n//   updateClass: (id, data) => api.put(`/admin/classes/${id}`, data),\n  \n//   // DELETE\n//   deleteStudent: (id) => api.delete(`/admin/students/${id}`),\n//   deleteTeacher: (id) => api.delete(`/admin/teachers/${id}`),\n//   deleteParent: (id) => api.delete(`/admin/parents/${id}`),\n//   deleteClass: (id) => api.delete(`/admin/classes/${id}`),\n// };\n\n\n// // ===== Teacher endpoints =====\n// export const teacherAPI = {\n//   getMarks: (params) => api.get(\"/teacher/marks\", { params }),\n//   addMarks: (data) => api.post(\"/teacher/marks\", data),\n//   updateMarks: (id, data) => api.put(`/teacher/marks/${id}`, data),\n//   deleteMarks: (id) => api.delete(`/teacher/marks/${id}`),\n\n//   getAttendance: (params) => api.get(\"/teacher/attendance\", { params }),\n//   markAttendance: (data) => api.post(\"/teacher/attendance\", data),\n//   getAttendanceSummary: (studentId) =>\n//     api.get(`/teacher/attendance/summary/${studentId}`),\n\n//   getClassPerformance: (classId) =>\n//     api.get(`/teacher/performance/class/${classId}`),\n//   getSubjectPerformance: (subjectId) =>\n//     api.get(`/teacher/performance/subject/${subjectId}`),\n\n//   sendNotification: (data) => api.post(\"/teacher/notifications/send\", data),\n// };\n\n// // ===== Student endpoints =====\n// export const studentAPI = {\n//   getMyMarks: () => api.get(\"/student/my-marks\"),\n//   getMyAttendance: () => api.get(\"/student/my-attendance\"),\n//   getMyPerformance: () => api.get(\"/student/my-performance\"),\n//   getMyNotifications: () => api.get(\"/student/my-notifications\"),\n//   markNotificationRead: (id) =>\n//     api.put(`/student/notifications/${id}/read`),\n// };\n\n// // ===== Parent endpoints =====\n// export const parentAPI = {\n//   getMyChildren: () => api.get(\"/parent/my-children\"),\n//   getChildMarks: (studentId) =>\n//     api.get(`/parent/child-marks/${studentId}`),\n//   getChildAttendance: (studentId) =>\n//     api.get(`/parent/child-attendance/${studentId}`),\n//   getChildPerformance: (studentId) =>\n//     api.get(`/parent/child-performance/${studentId}`),\n//   getMyNotifications: () => api.get(\"/parent/my-notifications\"),\n//   markNotificationRead: (id) =>\n//     api.put(`/parent/notifications/${id}/read`),\n// };\n\n// // ===== ML endpoints =====\n// export const mlAPI = {\n//   trainModel: () => api.post(\"/ml/train\"),\n//   predictPerformance: (studentId) =>\n//     api.get(`/ml/predict/${studentId}`),\n//   getWeakStudents: () => api.get(\"/ml/weak-students\"),\n//   getClassPredictions: (classId) =>\n//     api.get(`/ml/class-predictions/${classId}`),\n// };\n\n// export default api;\n\nimport React, { useEffect, useState } from \"react\";\nimport { adminAPI } from \"../api\";\nimport \"./AdminDashboard.css\";\n\nfunction AdminDashboard({ user, onLogout }) {\n\n  const [tab, setTab] = useState(\"overview\");\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n\n  const [students, setStudents] = useState([]);\n  const [teachers, setTeachers] = useState([]);\n  const [parents, setParents] = useState([]);\n  const [classes, setClasses] = useState([]);\n\n  const [editingId, setEditingId] = useState(null);\n  const [editForm, setEditForm] = useState({});\n  const [showCreate, setShowCreate] = useState(null);\n  const [createForm, setCreateForm] = useState({});\n\n  const [confirmDialog, setConfirmDialog] = useState({\n    show: false,\n    onConfirm: null\n  });\n\n  // ================= LOAD DATA =================\n  const loadData = async () => {\n    try {\n      setLoading(true);\n      const [s, t, p, c] = await Promise.all([\n        adminAPI.getStudents(),\n        adminAPI.getTeachers(),\n        adminAPI.getParents(),\n        adminAPI.getClasses()\n      ]);\n\n      setStudents(s.data || []);\n      setTeachers(t.data || []);\n      setParents(p.data || []);\n      setClasses(c.data || []);\n      setError(\"\");\n    } catch (err) {\n      setError(\"Failed to load admin data\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    loadData();\n  }, []);\n\n  // ================= EDIT =================\n  const startEdit = (item) => {\n    setEditingId(item.id);\n    setEditForm(item);\n  };\n\n  const saveEdit = async (updateFn) => {\n    try {\n      await updateFn(editingId, editForm);\n      setEditingId(null);\n      loadData();\n    } catch {\n      setError(\"Update failed\");\n    }\n  };\n\n  // ================= DELETE =================\n  const confirmDelete = (deleteFn, id) => {\n    setConfirmDialog({\n      show: true,\n      onConfirm: async () => {\n        await deleteFn(id);\n        setConfirmDialog({ show: false, onConfirm: null });\n        loadData();\n      }\n    });\n  };\n\n  // ================= CREATE =================\n  const handleCreate = async (createFn) => {\n    try {\n      await createFn(createForm);\n      setShowCreate(null);\n      setCreateForm({});\n      loadData();\n    } catch {\n      setError(\"Create failed\");\n    }\n  };\n\n  // ================= TABLE RENDER =================\n  const renderTable = (data, type) => {\n\n    const apiMap = {\n      students: {\n        update: adminAPI.updateStudent,\n        delete: adminAPI.deleteStudent,\n        create: adminAPI.createStudent\n      },\n      teachers: {\n        update: adminAPI.updateTeacher,\n        delete: adminAPI.deleteTeacher,\n        create: adminAPI.createTeacher\n      },\n      parents: {\n        update: adminAPI.updateParent,\n        delete: adminAPI.deleteParent,\n        create: adminAPI.createParent\n      },\n      classes: {\n        update: adminAPI.updateClass,\n        delete: adminAPI.deleteClass,\n        create: adminAPI.createClass\n      }\n    };\n\n    if (!data.length) return <p>No data found</p>;\n\n    const keys = Object.keys(data[0]).filter(k => k !== \"password_hash\");\n\n    return (\n      <>\n        <div className=\"table-header\">\n          <button\n            className=\"btn btn-primary\"\n            onClick={() => setShowCreate(type)}\n          >\n            âž• Add {type.slice(0, -1)}\n          </button>\n        </div>\n\n        <table className=\"data-table\">\n          <thead>\n            <tr>\n              {keys.map(k => <th key={k}>{k}</th>)}\n              <th>Actions</th>\n            </tr>\n          </thead>\n          <tbody>\n            {data.map(row => (\n              <tr key={row.id}>\n                {keys.map(k => (\n                  <td key={k}>\n                    {editingId === row.id ? (\n                      <input\n                        value={editForm[k] || \"\"}\n                        onChange={e =>\n                          setEditForm({ ...editForm, [k]: e.target.value })\n                        }\n                      />\n                    ) : (\n                      Array.isArray(row[k])\n                        ? JSON.stringify(row[k])\n                        : row[k]\n                    )}\n                  </td>\n                ))}\n                <td>\n                  {editingId === row.id ? (\n                    <>\n                      <button\n                        className=\"btn btn-success btn-sm\"\n                        onClick={() => saveEdit(apiMap[type].update)}\n                      >\n                        Save\n                      </button>\n                      <button\n                        className=\"btn btn-secondary btn-sm\"\n                        onClick={() => setEditingId(null)}\n                      >\n                        Cancel\n                      </button>\n                    </>\n                  ) : (\n                    <>\n                      <button\n                        className=\"btn btn-warning btn-sm\"\n                        onClick={() => startEdit(row)}\n                      >\n                        Edit\n                      </button>\n                      <button\n                        className=\"btn btn-danger btn-sm\"\n                        onClick={() =>\n                          confirmDelete(apiMap[type].delete, row.id)\n                        }\n                      >\n                        Delete\n                      </button>\n                    </>\n                  )}\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n\n        {showCreate === type && (\n          <div className=\"modal-overlay\">\n            <div className=\"modal\">\n              <h3>Create {type.slice(0, -1)}</h3>\n              {keys.map(k => (\n                <input\n                  key={k}\n                  placeholder={k}\n                  value={createForm[k] || \"\"}\n                  onChange={e =>\n                    setCreateForm({ ...createForm, [k]: e.target.value })\n                  }\n                />\n              ))}\n              <div className=\"modal-actions\">\n                <button\n                  className=\"btn btn-primary\"\n                  onClick={() => handleCreate(apiMap[type].create)}\n                >\n                  Create\n                </button>\n                <button\n                  className=\"btn btn-secondary\"\n                  onClick={() => setShowCreate(null)}\n                >\n                  Cancel\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n      </>\n    );\n  };\n\n  // ================= LOADING =================\n  if (loading) return <div className=\"dashboard-container\">Loading...</div>;\n\n  return (\n    <div className=\"dashboard-container\">\n      <div className=\"dashboard-header\">\n        <h2>Admin Dashboard</h2>\n        <div>\n          <span>{user?.email}</span>\n          <button className=\"btn btn-secondary\" onClick={onLogout}>\n            Logout\n          </button>\n        </div>\n      </div>\n\n      {error && <div className=\"error-banner\">{error}</div>}\n\n      <div className=\"dashboard-tabs\">\n        {[\"overview\", \"students\", \"teachers\", \"parents\", \"classes\"].map(t => (\n          <button\n            key={t}\n            className={tab === t ? \"tab active\" : \"tab\"}\n            onClick={() => setTab(t)}\n          >\n            {t}\n          </button>\n        ))}\n      </div>\n\n      <div className=\"dashboard-content\">\n        {tab === \"overview\" && (\n          <div className=\"overview-grid\">\n            <div>Total Students: {students.length}</div>\n            <div>Total Teachers: {teachers.length}</div>\n            <div>Total Parents: {parents.length}</div>\n            <div>Total Classes: {classes.length}</div>\n          </div>\n        )}\n\n        {tab === \"students\" && renderTable(students, \"students\")}\n        {tab === \"teachers\" && renderTable(teachers, \"teachers\")}\n        {tab === \"parents\" && renderTable(parents, \"parents\")}\n        {tab === \"classes\" && renderTable(classes, \"classes\")}\n      </div>\n\n      {confirmDialog.show && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal\">\n            <h3>Confirm Delete</h3>\n            <button\n              className=\"btn btn-danger\"\n              onClick={confirmDialog.onConfirm}\n            >\n              Yes Delete\n            </button>\n            <button\n              className=\"btn btn-secondary\"\n              onClick={() => setConfirmDialog({ show: false })}\n            >\n              Cancel\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default AdminDashboard;"],"mappings":";;AAAA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,QAAQ,QAAQ,QAAQ;AACjC,OAAO,sBAAsB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAE9B,SAASC,cAAcA,CAAC;EAAEC,IAAI;EAAEC;AAAS,CAAC,EAAE;EAAAC,EAAA;EAE1C,MAAM,CAACC,GAAG,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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}