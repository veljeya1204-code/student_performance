{"ast":null,"code":"// import axios from 'axios';\n\n// const API_BASE_URL = \"http://localhost:5000/api\";\n\n// const api = axios.create({\n//   baseURL: API_BASE_URL,\n//   headers: {\n//     'Content-Type': 'application/json',\n//   },\n// });\n\n// // /**\n// //  * REQUEST INTERCEPTOR\n// //  * Ensures the latest token from localStorage is attached to every request.\n// //  */\n// // api.interceptors.request.use(\n// //   (config) => {\n// //     const token = localStorage.getItem(\"token\");\n\n// //     if (token) {\n// //       // Use standard Bearer token format\n// //       config.headers.Authorization = `Bearer ${token}`;\n// //     } else {\n// //       console.warn(`No token found for request to: ${config.url}`);\n// //     }\n\n// //     return config;\n// //   },\n// //   (error) => {\n// //     return Promise.reject(error);\n// //   }\n// // );\n\n// // /**\n// //  * RESPONSE INTERCEPTOR\n// //  * Handles global error cases like 401 Unauthorized.\n// //  */\n// // api.interceptors.response.use(\n// //   (response) => response,\n// //   (error) => {\n// //     const originalRequest = error.config;\n\n// //     // Check if error is 401 and we aren't already on the login page\n// //     // This prevents a loop if the login credentials themselves are wrong\n// //     if (\n// //       error.response?.status === 401 && \n// //       !originalRequest.url.includes('/auth/login')\n// //     ) {\n// //       console.error(\"Unauthorized! Clearing session and redirecting to login...\");\n\n// //       localStorage.removeItem(\"user\");\n// //       localStorage.removeItem(\"token\");\n\n// //       // Redirect to login only if not already there\n// //       if (window.location.pathname !== '/login') {\n// //         window.location.href = \"/login\";\n// //       }\n// //     }\n\n// //     return Promise.reject(error);\n// //   }\n// // );\n\n// // // --- API ENDPOINTS ---\n\n// // // Auth endpoints\n// // export const authAPI = {\n// //   login: (email, password) => api.post('/auth/login', { email, password }),\n// //   getCurrentUser: () => api.get('/auth/me'),\n// //   changePassword: (oldPassword, newPassword) =>\n// //     api.post('/auth/change-password', { old_password: oldPassword, new_password: newPassword }),\n// // };\n\n// // // Admin endpoints\n// // export const adminAPI = {\n// //   getUsers: () => api.get('/admin/users'),\n// //   createUser: (data) => api.post('/admin/users', data),\n// //   deleteUser: (id) => api.delete(`/admin/users/${id}`),\n\n// //   getStudents: () => api.get('/admin/students'),\n// //   createStudent: (data) => api.post('/admin/students', data),\n// //   updateStudent: (id, data) => api.put(`/admin/students/${id}`, data),\n\n// //   getTeachers: () => api.get('/admin/teachers'),\n// //   createTeacher: (data) => api.post('/admin/teachers', data),\n\n// //   getParents: () => api.get('/admin/parents'),\n// //   createParent: (data) => api.post('/admin/parents', data),\n\n// //   getClasses: () => api.get('/admin/classes'),\n// //   createClass: (data) => api.post('/admin/classes', data),\n\n// //   getSubjects: (classId) => api.get('/admin/subjects', { params: { class_id: classId } }),\n// //   createSubject: (data) => api.post('/admin/subjects', data),\n// // };\n\n// // // Teacher endpoints\n// // export const teacherAPI = {\n// //   getMarks: (params) => api.get('/teacher/marks', { params }),\n// //   addMarks: (data) => api.post('/teacher/marks', data),\n// //   updateMarks: (id, data) => api.put(`/teacher/marks/${id}`, data),\n// //   deleteMarks: (id) => api.delete(`/teacher/marks/${id}`),\n\n// //   getAttendance: (params) => api.get('/teacher/attendance', { params }),\n// //   markAttendance: (data) => api.post('/teacher/attendance', data),\n// //   getAttendanceSummary: (studentId) => api.get(`/teacher/attendance/summary/${studentId}`),\n\n// //   getClassPerformance: (classId) => api.get(`/teacher/performance/class/${classId}`),\n// //   getSubjectPerformance: (subjectId) => api.get(`/teacher/performance/subject/${subjectId}`),\n\n// //   sendNotification: (data) => api.post('/teacher/notifications/send', data),\n// // };\n\n// // // Student endpoints\n// // export const studentAPI = {\n// //   getMyMarks: () => api.get('/student/my-marks'),\n// //   getMyAttendance: () => api.get('/student/my-attendance'),\n// //   getMyPerformance: () => api.get('/student/my-performance'),\n// //   getMyNotifications: () => api.get('/student/my-notifications'),\n// //   markNotificationRead: (id) => api.put(`/student/notifications/${id}/read`),\n// // };\n\n// // // Parent endpoints\n// // export const parentAPI = {\n// //   getMyChildren: () => api.get('/parent/my-children'),\n// //   getChildMarks: (studentId) => api.get(`/parent/child-marks/${studentId}`),\n// //   getChildAttendance: (studentId) => api.get(`/parent/child-attendance/${studentId}`),\n// //   getChildPerformance: (studentId) => api.get(`/parent/child-performance/${studentId}`),\n// //   getMyNotifications: () => api.get('/parent/my-notifications'),\n// //   markNotificationRead: (id) => api.put(`/parent/notifications/${id}/read`),\n// // };\n\n// // // ML endpoints\n// // export const mlAPI = {\n// //   trainModel: () => api.post('/ml/train'),\n// //   predictPerformance: (studentId) => api.get(`/ml/predict/${studentId}`),\n// //   getWeakStudents: () => api.get('/ml/weak-students'),\n// //   getClassPredictions: (classId) => api.get(`/ml/class-predictions/${classId}`),\n// // };\n\n// // export default api;\n// // import axios from 'axios';\n\n// // const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://127.0.0.1:5000/api';\n\n// // // Create axios instance\n// // const api = axios.create({\n// //   baseURL: API_BASE_URL,\n// //   headers: {\n// //     'Content-Type': 'application/json',\n// //   },\n// // });\n\n// // // Add token to requests\n// // // api.interceptors.request.use(\n// // //   (config) => {\n// // //     const token = localStorage.getItem('token');\n// // //     if (token) {\n// // //       config.headers.Authorization = `Bearer ${token}`;\n// // //     }\n// // //     return config;\n// // //   },\n// // //   (error) => Promise.reject(error)\n// // // );\n\n// // api.interceptors.request.use((config) => {\n// //   const token = localStorage.getItem(\"token\");\n\n// //   if (token) {\n// //     config.headers.Authorization = `Bearer ${token}`;\n// //   }\n\n// //   return config;\n// // });\n\n// // // Handle response errors\n// // // api.interceptors.response.use(\n// // //   (response) => response,\n// // //   (error) => {\n// // //     if (error.response?.status === 401) {\n// // //       localStorage.removeItem('token');\n// // //       localStorage.removeItem('user');\n// // //       // window.location.href = '/login';\n// // //       window.location.href = '/';\n\n// // //     }\n// // //     return Promise.reject(error);\n// // //   }\n// // // );\n// //   api.interceptors.response.use(\n// //   (response) => response,\n// //   (error) => {\n// //     const isUnauthorized = error.response?.status === 401;\n// //     const isLoginRequest = error.config?.url?.includes('/auth/login');\n\n// //     if (isUnauthorized && !isLoginRequest) {\n// //       localStorage.removeItem('token');\n// //       localStorage.removeItem('user');\n\n// //       if (window.location.pathname !== '/') {\n// //         window.location.href = '/';\n// //       }\n// //     }\n\n// //     return Promise.reject(error);\n// //   }\n// // );\n\n// // // Auth endpoints\n// // export const authAPI = {\n// //   login: (email, password) => api.post('/auth/login', { email, password }),\n// //   getCurrentUser: () => api.get('/auth/me'),\n// //   changePassword: (oldPassword, newPassword) =>\n// //     api.post('/auth/change-password', { old_password: oldPassword, new_password: newPassword }),\n// // };\n\n// // // Admin endpoints\n// // export const adminAPI = {\n// //   getUsers: () => api.get('/admin/users'),\n// //   createUser: (data) => api.post('/admin/users', data),\n// //   deleteUser: (id) => api.delete(`/admin/users/${id}`),\n\n// //   getStudents: () => api.get('/admin/students'),\n// //   createStudent: (data) => api.post('/admin/students', data),\n// //   updateStudent: (id, data) => api.put(`/admin/students/${id}`, data),\n\n// //   getTeachers: () => api.get('/admin/teachers'),\n// //   createTeacher: (data) => api.post('/admin/teachers', data),\n\n// //   getParents: () => api.get('/admin/parents'),\n// //   createParent: (data) => api.post('/admin/parents', data),\n\n// //   getClasses: () => api.get('/admin/classes'),\n// //   createClass: (data) => api.post('/admin/classes', data),\n\n// //   getSubjects: (classId) => api.get('/admin/subjects', { params: { class_id: classId } }),\n// //   createSubject: (data) => api.post('/admin/subjects', data),\n// // };\n\n// // // Teacher endpoints\n// // export const teacherAPI = {\n// //   getMarks: (params) => api.get('/teacher/marks', { params }),\n// //   addMarks: (data) => api.post('/teacher/marks', data),\n// //   updateMarks: (id, data) => api.put(`/teacher/marks/${id}`, data),\n// //   deleteMarks: (id) => api.delete(`/teacher/marks/${id}`),\n\n// //   getAttendance: (params) => api.get('/teacher/attendance', { params }),\n// //   markAttendance: (data) => api.post('/teacher/attendance', data),\n// //   getAttendanceSummary: (studentId) => api.get(`/teacher/attendance/summary/${studentId}`),\n\n// //   getClassPerformance: (classId) => api.get(`/teacher/performance/class/${classId}`),\n// //   getSubjectPerformance: (subjectId) => api.get(`/teacher/performance/subject/${subjectId}`),\n\n// //   sendNotification: (data) => api.post('/teacher/notifications/send', data),\n// // };\n\n// // // Student endpoints\n// // export const studentAPI = {\n// //   getMyMarks: () => api.get('/student/my-marks'),\n// //   getMyAttendance: () => api.get('/student/my-attendance'),\n// //   getMyPerformance: () => api.get('/student/my-performance'),\n// //   getMyNotifications: () => api.get('/student/my-notifications'),\n// //   markNotificationRead: (id) => api.put(`/student/notifications/${id}/read`),\n// // };\n\n// // // Parent endpoints\n// // export const parentAPI = {\n// //   getMyChildren: () => api.get('/parent/my-children'),\n// //   getChildMarks: (studentId) => api.get(`/parent/child-marks/${studentId}`),\n// //   getChildAttendance: (studentId) => api.get(`/parent/child-attendance/${studentId}`),\n// //   getChildPerformance: (studentId) => api.get(`/parent/child-performance/${studentId}`),\n// //   getMyNotifications: () => api.get('/parent/my-notifications'),\n// //   markNotificationRead: (id) => api.put(`/parent/notifications/${id}/read`),\n// // };\n\n// // // ML endpoints\n// // export const mlAPI = {\n// //   trainModel: () => api.post('/ml/train'),\n// //   predictPerformance: (studentId) => api.get(`/ml/predict/${studentId}`),\n// //   getWeakStudents: () => api.get('/ml/weak-students'),\n// //   getClassPredictions: (classId) => api.get(`/ml/class-predictions/${classId}`),\n// // };\n\n// // export default api;\n// // frontend/src/api.js\n// // import axios from \"axios\";\n\n// // const API_BASE_URL =\n// //   process.env.REACT_APP_API_URL || \"http://127.0.0.1:5000/api\";\n\n// // src/api.js - DEBUG VERSION (temporary)\n// api.interceptors.response.use(\n//   (response) => response,\n//   // (error) => {\n//   //   console.error('ðŸ”´ API ERROR:', {\n//   //     status: error.response?.status,\n//   //     url: error.config?.url,\n//   //     message: error.response?.data?.error || error.message\n//   //   });\n\n//   //   const isUnauthorized = error.response?.status === 401;\n//   //   const isLoginRequest = error.config?.url?.includes('/auth/login');\n\n//   //   if (isUnauthorized && !isLoginRequest) {\n//   //     console.error('ðŸš« 401 DETECTED â†’ Clearing session');\n//   //     localStorage.removeItem('token');\n//   //     localStorage.removeItem('user');\n\n//   //     if (window.location.pathname !== '/login') {\n//   //       window.location.href = '/login';\n//   //     }\n//   //   }\n\n//   //   return Promise.reject(error);\n//   // }\n// );\n\n// // Request interceptor DEBUG\n// api.interceptors.request.use((config) => {\n//   const token = localStorage.getItem(\"token\");\n//   console.log('ðŸš€ REQUEST:', config.url, \n//     token ? `Token OK (${token.slice(0,20)}...)` : 'âŒ NO TOKEN');\n\n//   if (token) {\n//     config.headers.Authorization = `Bearer ${token}`;\n//   }\n//   return config;\n// });\n\n// // // Create axios instance\n// // const api = axios.create({\n// //   baseURL: API_BASE_URL,\n// //   headers: {\n// //     \"Content-Type\": \"application/json\",\n// //   },\n// // });\n\n// // // Request interceptor â€“ attach token\n// // // api.interceptors.request.use((config) => {\n// // //   const token = localStorage.getItem(\"token\");\n// // //   console.log(`ðŸ” ${config.url} Token:`, token ? \"âœ…\" : \"âŒ\");  // DEBUG\n// // //   if (token) {\n// // //     config.headers.Authorization = `Bearer ${token}`;\n// // //   }\n// // //   return config;\n// // // });\n// // api.interceptors.request.use((config) => {\n// //   const token = localStorage.getItem(\"token\");\n// //   console.log(\"ðŸš€\", config.url, token ? \"âœ… TOKEN\" : \"âŒ NO TOKEN\");\n// //   if (token) config.headers.Authorization = `Bearer ${token}`;\n// //   return config;\n// // });\n\n// // // Response interceptor â€“ handle 401\n// // api.interceptors.response.use(\n// //   (response) => response,\n// //   (error) => {\n// //     const isUnauthorized = error.response?.status === 401;\n// //     const isLoginRequest = error.config?.url?.includes(\"/auth/login\");\n\n// //     if (isUnauthorized && !isLoginRequest) {\n// //       localStorage.removeItem(\"token\");\n// //       localStorage.removeItem(\"user\");\n// //       if (window.location.pathname !== \"/\") {\n// //         window.location.href = \"/\";\n// //       }\n// //     }\n// //     return Promise.reject(error);\n// //   }\n// // );\n\n// // ===== Auth endpoints =====\n// export const authAPI = {\n//   login: (email, password) => api.post(\"/auth/login\", { email, password }),\n//   getCurrentUser: () => api.get(\"/auth/me\"),\n//   changePassword: (oldPassword, newPassword) =>\n//     api.post(\"/auth/change-password\", {\n//       old_password: oldPassword,\n//       new_password: newPassword,\n//     }),\n// };\n\n// // ===== Admin endpoints =====\n// // export const adminAPI = {\n// //   getUsers: () => api.get(\"/admin/users\"),\n// //   createUser: (data) => api.post(\"/admin/users\", data),\n// //   deleteUser: (id) => api.delete(`/admin/users/${id}`),\n\n// //   getStudents: () => api.get(\"/admin/students\"),\n// //   createStudent: (data) => api.post(\"/admin/students\", data),\n// //   updateStudent: (id, data) => api.put(`/admin/students/${id}`, data),\n\n// //   getTeachers: () => api.get(\"/admin/teachers\"),\n// //   createTeacher: (data) => api.post(\"/admin/teachers\", data),\n\n// //   getParents: () => api.get(\"/admin/parents\"),\n// //   createParent: (data) => api.post(\"/admin/parents\", data),\n\n// //   getClasses: () => api.get(\"/admin/classes\"),\n// //   createClass: (data) => api.post(\"/admin/classes\", data),\n\n// //   getSubjects: (classId) =>\n// //     api.get(\"/admin/subjects\", { params: { class_id: classId } }),\n// //   createSubject: (data) => api.post(\"/admin/subjects\", data),\n// // };\n// // Add these CRUD methods\n// export const adminAPI = {\n//   // ... existing GET methods\n//   getUsers: () => api.get(\"/admin/users\"),\n//   createUser: (data) => api.post(\"/admin/users\", data),\n//   deleteUser: (id) => api.delete(`/admin/users/${id}`),\n\n//   getStudents: () => api.get(\"/admin/students\"),\n//   createStudent: (data) => api.post(\"/admin/students\", data),\n//   updateStudent: (id, data) => api.put(`/admin/students/${id}`, data),\n\n//   getTeachers: () => api.get(\"/admin/teachers\"),\n//   createTeacher: (data) => api.post(\"/admin/teachers\", data),\n\n//   getParents: () => api.get(\"/admin/parents\"),\n//   createParent: (data) => api.post(\"/admin/parents\", data),\n\n//   getClasses: () => api.get(\"/admin/classes\"),\n//   createClass: (data) => api.post(\"/admin/classes\", data),\n\n//   getSubjects: (classId) =>\n//     api.get(\"/admin/subjects\", { params: { class_id: classId } }),\n//   createSubject: (data) => api.post(\"/admin/subjects\", data),\n\n//   // CREATE\n//   createStudent: (data) => api.post('/admin/students', data),\n//   createTeacher: (data) => api.post('/admin/teachers', data),\n//   createParent: (data) => api.post('/admin/parents', data),\n//   createClass: (data) => api.post('/admin/classes', data),\n\n//   // UPDATE\n//   updateStudent: (id, data) => api.put(`/admin/students/${id}`, data),\n//   updateTeacher: (id, data) => api.put(`/admin/teachers/${id}`, data),\n//   updateParent: (id, data) => api.put(`/admin/parents/${id}`, data),\n//   updateClass: (id, data) => api.put(`/admin/classes/${id}`, data),\n\n//   // DELETE\n//   deleteStudent: (id) => api.delete(`/admin/students/${id}`),\n//   deleteTeacher: (id) => api.delete(`/admin/teachers/${id}`),\n//   deleteParent: (id) => api.delete(`/admin/parents/${id}`),\n//   deleteClass: (id) => api.delete(`/admin/classes/${id}`),\n// };\n\n// // ===== Teacher endpoints =====\n// export const teacherAPI = {\n//   getMarks: (params) => api.get(\"/teacher/marks\", { params }),\n//   addMarks: (data) => api.post(\"/teacher/marks\", data),\n//   updateMarks: (id, data) => api.put(`/teacher/marks/${id}`, data),\n//   deleteMarks: (id) => api.delete(`/teacher/marks/${id}`),\n\n//   getAttendance: (params) => api.get(\"/teacher/attendance\", { params }),\n//   markAttendance: (data) => api.post(\"/teacher/attendance\", data),\n//   getAttendanceSummary: (studentId) =>\n//     api.get(`/teacher/attendance/summary/${studentId}`),\n\n//   getClassPerformance: (classId) =>\n//     api.get(`/teacher/performance/class/${classId}`),\n//   getSubjectPerformance: (subjectId) =>\n//     api.get(`/teacher/performance/subject/${subjectId}`),\n\n//   sendNotification: (data) => api.post(\"/teacher/notifications/send\", data),\n// };\n\n// // ===== Student endpoints =====\n// export const studentAPI = {\n//   getMyMarks: () => api.get(\"/student/my-marks\"),\n//   getMyAttendance: () => api.get(\"/student/my-attendance\"),\n//   getMyPerformance: () => api.get(\"/student/my-performance\"),\n//   getMyNotifications: () => api.get(\"/student/my-notifications\"),\n//   markNotificationRead: (id) =>\n//     api.put(`/student/notifications/${id}/read`),\n// };\n\n// // ===== Parent endpoints =====\n// export const parentAPI = {\n//   getMyChildren: () => api.get(\"/parent/my-children\"),\n//   getChildMarks: (studentId) =>\n//     api.get(`/parent/child-marks/${studentId}`),\n//   getChildAttendance: (studentId) =>\n//     api.get(`/parent/child-attendance/${studentId}`),\n//   getChildPerformance: (studentId) =>\n//     api.get(`/parent/child-performance/${studentId}`),\n//   getMyNotifications: () => api.get(\"/parent/my-notifications\"),\n//   markNotificationRead: (id) =>\n//     api.put(`/parent/notifications/${id}/read`),\n// };\n\n// // ===== ML endpoints =====\n// export const mlAPI = {\n//   trainModel: () => api.post(\"/ml/train\"),\n//   predictPerformance: (studentId) =>\n//     api.get(`/ml/predict/${studentId}`),\n//   getWeakStudents: () => api.get(\"/ml/weak-students\"),\n//   getClassPredictions: (classId) =>\n//     api.get(`/ml/class-predictions/${classId}`),\n// };\n// // api.js\n// export const cgpaAPI = {\n//   calculate: (data) => api.post(\"/student/calculate-cgpa\", data),\n// };\n\n// export default api;\n\n// frontend/src/api.js - COMPLETE FIXED VERSION\nimport axios from 'axios';\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://127.0.0.1:5000/api';\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Request interceptor\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem(\"token\");\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => Promise.reject(error));\n\n// Response interceptor\napi.interceptors.response.use(response => response, error => {\n  var _error$response, _error$config, _error$config$url;\n  if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401 && !((_error$config = error.config) !== null && _error$config !== void 0 && (_error$config$url = _error$config.url) !== null && _error$config$url !== void 0 && _error$config$url.includes('/auth/login'))) {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    if (window.location.pathname !== '/login') {\n      window.location.href = '/login';\n    }\n  }\n  return Promise.reject(error);\n});\n\n// ===== AUTH API =====\nexport const authAPI = {\n  login: (email, password) => api.post('/auth/login', {\n    email,\n    password\n  }),\n  getCurrentUser: () => api.get('/auth/me'),\n  changePassword: (oldPassword, newPassword) => api.post('/auth/change-password', {\n    old_password: oldPassword,\n    new_password: newPassword\n  })\n};\n\n// ===== ADMIN API (FULL CRUD) =====\nexport const adminAPI = {\n  getUsers: () => api.get('/admin/users'),\n  createUser: data => api.post('/admin/users', data),\n  updateUser: (id, data) => api.put(`/admin/users/${id}`, data),\n  deleteUser: id => api.delete(`/admin/users/${id}`),\n  getStudents: () => api.get('/admin/students'),\n  createStudent: data => api.post('/admin/students', data),\n  updateStudent: (id, data) => api.put(`/admin/students/${id}`, data),\n  deleteStudent: id => api.delete(`/admin/students/${id}`),\n  getTeachers: () => api.get('/admin/teachers'),\n  createTeacher: data => api.post('/admin/teachers', data),\n  updateTeacher: (id, data) => api.put(`/admin/teachers/${id}`, data),\n  deleteTeacher: id => api.delete(`/admin/teachers/${id}`),\n  getParents: () => api.get('/admin/parents'),\n  createParent: data => api.post('/admin/parents', data),\n  updateParent: (id, data) => api.put(`/admin/parents/${id}`, data),\n  deleteParent: id => api.delete(`/admin/parents/${id}`),\n  getClasses: () => api.get('/admin/classes'),\n  createClass: data => api.post('/admin/classes', data),\n  updateClass: (id, data) => api.put(`/admin/classes/${id}`, data),\n  deleteClass: id => api.delete(`/admin/classes/${id}`),\n  getSubjects: classId => api.get('/admin/subjects', {\n    params: {\n      class_id: classId\n    }\n  }),\n  createSubject: data => api.post('/admin/subjects', data)\n};\n\n// ===== TEACHER API =====\nexport const teacherAPI = {\n  getMarks: params => api.get('/teacher/marks', {\n    params\n  }),\n  addMarks: data => api.post('/teacher/marks', data),\n  updateMarks: (id, data) => api.put(`/teacher/marks/${id}`, data),\n  deleteMarks: id => api.delete(`/teacher/marks/${id}`),\n  getAttendance: params => api.get('/teacher/attendance', {\n    params\n  }),\n  markAttendance: data => api.post('/teacher/attendance', data),\n  getAttendanceSummary: studentId => api.get(`/teacher/attendance/summary/${studentId}`),\n  getClassPerformance: classId => api.get(`/teacher/performance/class/${classId}`),\n  getSubjectPerformance: subjectId => api.get(`/teacher/performance/subject/${subjectId}`),\n  sendNotification: data => api.post('/teacher/notifications/send', data)\n};\n\n// ===== STUDENT API =====\nexport const studentAPI = {\n  getMyMarks: () => api.get('/student/my-marks'),\n  getMyAttendance: () => api.get('/student/my-attendance'),\n  getMyPerformance: () => api.get('/student/my-performance'),\n  getMyNotifications: () => api.get('/student/my-notifications'),\n  markNotificationRead: id => api.put(`/student/notifications/${id}/read`)\n};\n\n// ===== PARENT API =====\nexport const parentAPI = {\n  getMyChildren: () => api.get('/parent/my-children'),\n  getChildMarks: studentId => api.get(`/parent/child-marks/${studentId}`),\n  getChildAttendance: studentId => api.get(`/parent/child-attendance/${studentId}`),\n  getChildPerformance: studentId => api.get(`/parent/child-performance/${studentId}`),\n  getMyNotifications: () => api.get('/parent/my-notifications'),\n  markNotificationRead: id => api.put(`/parent/notifications/${id}/read`)\n};\n\n// ===== ML API =====\nexport const mlAPI = {\n  trainModel: () => api.post('/ml/train'),\n  predictPerformance: studentId => api.get(`/ml/predict/${studentId}`),\n  getWeakStudents: () => api.get('/ml/weak-students'),\n  getClassPredictions: classId => api.get(`/ml/class-predictions/${classId}`)\n};\n\n// ðŸ”¥ CGPA API - PERFECT MATCH FOR YOUR FLASK BACKEND\nexport const cgpaAPI = {\n  calculateStudentCGPA: data => api.post('/student/calculate-cgpa', data)\n  // data = { student_id: 123, marks: {\"HS3152\": \"A\"} }\n};\n\n// ðŸ”¥ DEFAULT EXPORT (for backward compatibility)\nexport default {\n  ...authAPI,\n  ...adminAPI,\n  ...teacherAPI,\n  ...studentAPI,\n  ...parentAPI,\n  ...mlAPI,\n  ...cgpaAPI,\n  api // Raw axios instance\n};","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","api","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","error","Promise","reject","response","_error$response","_error$config","_error$config$url","status","url","includes","removeItem","window","location","pathname","href","authAPI","login","email","password","post","getCurrentUser","get","changePassword","oldPassword","newPassword","old_password","new_password","adminAPI","getUsers","createUser","data","updateUser","id","put","deleteUser","delete","getStudents","createStudent","updateStudent","deleteStudent","getTeachers","createTeacher","updateTeacher","deleteTeacher","getParents","createParent","updateParent","deleteParent","getClasses","createClass","updateClass","deleteClass","getSubjects","classId","params","class_id","createSubject","teacherAPI","getMarks","addMarks","updateMarks","deleteMarks","getAttendance","markAttendance","getAttendanceSummary","studentId","getClassPerformance","getSubjectPerformance","subjectId","sendNotification","studentAPI","getMyMarks","getMyAttendance","getMyPerformance","getMyNotifications","markNotificationRead","parentAPI","getMyChildren","getChildMarks","getChildAttendance","getChildPerformance","mlAPI","trainModel","predictPerformance","getWeakStudents","getClassPredictions","cgpaAPI","calculateStudentCGPA"],"sources":["/Users/jeyamurugan/Downloads/student/frontend/src/api.js"],"sourcesContent":["// import axios from 'axios';\n\n// const API_BASE_URL = \"http://localhost:5000/api\";\n\n// const api = axios.create({\n//   baseURL: API_BASE_URL,\n//   headers: {\n//     'Content-Type': 'application/json',\n//   },\n// });\n\n// // /**\n// //  * REQUEST INTERCEPTOR\n// //  * Ensures the latest token from localStorage is attached to every request.\n// //  */\n// // api.interceptors.request.use(\n// //   (config) => {\n// //     const token = localStorage.getItem(\"token\");\n\n// //     if (token) {\n// //       // Use standard Bearer token format\n// //       config.headers.Authorization = `Bearer ${token}`;\n// //     } else {\n// //       console.warn(`No token found for request to: ${config.url}`);\n// //     }\n\n// //     return config;\n// //   },\n// //   (error) => {\n// //     return Promise.reject(error);\n// //   }\n// // );\n\n// // /**\n// //  * RESPONSE INTERCEPTOR\n// //  * Handles global error cases like 401 Unauthorized.\n// //  */\n// // api.interceptors.response.use(\n// //   (response) => response,\n// //   (error) => {\n// //     const originalRequest = error.config;\n\n// //     // Check if error is 401 and we aren't already on the login page\n// //     // This prevents a loop if the login credentials themselves are wrong\n// //     if (\n// //       error.response?.status === 401 && \n// //       !originalRequest.url.includes('/auth/login')\n// //     ) {\n// //       console.error(\"Unauthorized! Clearing session and redirecting to login...\");\n      \n// //       localStorage.removeItem(\"user\");\n// //       localStorage.removeItem(\"token\");\n      \n// //       // Redirect to login only if not already there\n// //       if (window.location.pathname !== '/login') {\n// //         window.location.href = \"/login\";\n// //       }\n// //     }\n    \n// //     return Promise.reject(error);\n// //   }\n// // );\n\n// // // --- API ENDPOINTS ---\n\n// // // Auth endpoints\n// // export const authAPI = {\n// //   login: (email, password) => api.post('/auth/login', { email, password }),\n// //   getCurrentUser: () => api.get('/auth/me'),\n// //   changePassword: (oldPassword, newPassword) =>\n// //     api.post('/auth/change-password', { old_password: oldPassword, new_password: newPassword }),\n// // };\n\n// // // Admin endpoints\n// // export const adminAPI = {\n// //   getUsers: () => api.get('/admin/users'),\n// //   createUser: (data) => api.post('/admin/users', data),\n// //   deleteUser: (id) => api.delete(`/admin/users/${id}`),\n  \n// //   getStudents: () => api.get('/admin/students'),\n// //   createStudent: (data) => api.post('/admin/students', data),\n// //   updateStudent: (id, data) => api.put(`/admin/students/${id}`, data),\n  \n// //   getTeachers: () => api.get('/admin/teachers'),\n// //   createTeacher: (data) => api.post('/admin/teachers', data),\n  \n// //   getParents: () => api.get('/admin/parents'),\n// //   createParent: (data) => api.post('/admin/parents', data),\n  \n// //   getClasses: () => api.get('/admin/classes'),\n// //   createClass: (data) => api.post('/admin/classes', data),\n  \n// //   getSubjects: (classId) => api.get('/admin/subjects', { params: { class_id: classId } }),\n// //   createSubject: (data) => api.post('/admin/subjects', data),\n// // };\n\n// // // Teacher endpoints\n// // export const teacherAPI = {\n// //   getMarks: (params) => api.get('/teacher/marks', { params }),\n// //   addMarks: (data) => api.post('/teacher/marks', data),\n// //   updateMarks: (id, data) => api.put(`/teacher/marks/${id}`, data),\n// //   deleteMarks: (id) => api.delete(`/teacher/marks/${id}`),\n  \n// //   getAttendance: (params) => api.get('/teacher/attendance', { params }),\n// //   markAttendance: (data) => api.post('/teacher/attendance', data),\n// //   getAttendanceSummary: (studentId) => api.get(`/teacher/attendance/summary/${studentId}`),\n  \n// //   getClassPerformance: (classId) => api.get(`/teacher/performance/class/${classId}`),\n// //   getSubjectPerformance: (subjectId) => api.get(`/teacher/performance/subject/${subjectId}`),\n  \n// //   sendNotification: (data) => api.post('/teacher/notifications/send', data),\n// // };\n\n// // // Student endpoints\n// // export const studentAPI = {\n// //   getMyMarks: () => api.get('/student/my-marks'),\n// //   getMyAttendance: () => api.get('/student/my-attendance'),\n// //   getMyPerformance: () => api.get('/student/my-performance'),\n// //   getMyNotifications: () => api.get('/student/my-notifications'),\n// //   markNotificationRead: (id) => api.put(`/student/notifications/${id}/read`),\n// // };\n\n// // // Parent endpoints\n// // export const parentAPI = {\n// //   getMyChildren: () => api.get('/parent/my-children'),\n// //   getChildMarks: (studentId) => api.get(`/parent/child-marks/${studentId}`),\n// //   getChildAttendance: (studentId) => api.get(`/parent/child-attendance/${studentId}`),\n// //   getChildPerformance: (studentId) => api.get(`/parent/child-performance/${studentId}`),\n// //   getMyNotifications: () => api.get('/parent/my-notifications'),\n// //   markNotificationRead: (id) => api.put(`/parent/notifications/${id}/read`),\n// // };\n\n// // // ML endpoints\n// // export const mlAPI = {\n// //   trainModel: () => api.post('/ml/train'),\n// //   predictPerformance: (studentId) => api.get(`/ml/predict/${studentId}`),\n// //   getWeakStudents: () => api.get('/ml/weak-students'),\n// //   getClassPredictions: (classId) => api.get(`/ml/class-predictions/${classId}`),\n// // };\n\n// // export default api;\n// // import axios from 'axios';\n\n// // const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://127.0.0.1:5000/api';\n\n// // // Create axios instance\n// // const api = axios.create({\n// //   baseURL: API_BASE_URL,\n// //   headers: {\n// //     'Content-Type': 'application/json',\n// //   },\n// // });\n\n// // // Add token to requests\n// // // api.interceptors.request.use(\n// // //   (config) => {\n// // //     const token = localStorage.getItem('token');\n// // //     if (token) {\n// // //       config.headers.Authorization = `Bearer ${token}`;\n// // //     }\n// // //     return config;\n// // //   },\n// // //   (error) => Promise.reject(error)\n// // // );\n\n// // api.interceptors.request.use((config) => {\n// //   const token = localStorage.getItem(\"token\");\n\n// //   if (token) {\n// //     config.headers.Authorization = `Bearer ${token}`;\n// //   }\n\n// //   return config;\n// // });\n\n// // // Handle response errors\n// // // api.interceptors.response.use(\n// // //   (response) => response,\n// // //   (error) => {\n// // //     if (error.response?.status === 401) {\n// // //       localStorage.removeItem('token');\n// // //       localStorage.removeItem('user');\n// // //       // window.location.href = '/login';\n// // //       window.location.href = '/';\n\n// // //     }\n// // //     return Promise.reject(error);\n// // //   }\n// // // );\n// //   api.interceptors.response.use(\n// //   (response) => response,\n// //   (error) => {\n// //     const isUnauthorized = error.response?.status === 401;\n// //     const isLoginRequest = error.config?.url?.includes('/auth/login');\n\n// //     if (isUnauthorized && !isLoginRequest) {\n// //       localStorage.removeItem('token');\n// //       localStorage.removeItem('user');\n\n// //       if (window.location.pathname !== '/') {\n// //         window.location.href = '/';\n// //       }\n// //     }\n\n// //     return Promise.reject(error);\n// //   }\n// // );\n\n\n// // // Auth endpoints\n// // export const authAPI = {\n// //   login: (email, password) => api.post('/auth/login', { email, password }),\n// //   getCurrentUser: () => api.get('/auth/me'),\n// //   changePassword: (oldPassword, newPassword) =>\n// //     api.post('/auth/change-password', { old_password: oldPassword, new_password: newPassword }),\n// // };\n\n// // // Admin endpoints\n// // export const adminAPI = {\n// //   getUsers: () => api.get('/admin/users'),\n// //   createUser: (data) => api.post('/admin/users', data),\n// //   deleteUser: (id) => api.delete(`/admin/users/${id}`),\n  \n// //   getStudents: () => api.get('/admin/students'),\n// //   createStudent: (data) => api.post('/admin/students', data),\n// //   updateStudent: (id, data) => api.put(`/admin/students/${id}`, data),\n  \n// //   getTeachers: () => api.get('/admin/teachers'),\n// //   createTeacher: (data) => api.post('/admin/teachers', data),\n  \n// //   getParents: () => api.get('/admin/parents'),\n// //   createParent: (data) => api.post('/admin/parents', data),\n  \n// //   getClasses: () => api.get('/admin/classes'),\n// //   createClass: (data) => api.post('/admin/classes', data),\n  \n// //   getSubjects: (classId) => api.get('/admin/subjects', { params: { class_id: classId } }),\n// //   createSubject: (data) => api.post('/admin/subjects', data),\n// // };\n\n// // // Teacher endpoints\n// // export const teacherAPI = {\n// //   getMarks: (params) => api.get('/teacher/marks', { params }),\n// //   addMarks: (data) => api.post('/teacher/marks', data),\n// //   updateMarks: (id, data) => api.put(`/teacher/marks/${id}`, data),\n// //   deleteMarks: (id) => api.delete(`/teacher/marks/${id}`),\n  \n// //   getAttendance: (params) => api.get('/teacher/attendance', { params }),\n// //   markAttendance: (data) => api.post('/teacher/attendance', data),\n// //   getAttendanceSummary: (studentId) => api.get(`/teacher/attendance/summary/${studentId}`),\n  \n// //   getClassPerformance: (classId) => api.get(`/teacher/performance/class/${classId}`),\n// //   getSubjectPerformance: (subjectId) => api.get(`/teacher/performance/subject/${subjectId}`),\n  \n// //   sendNotification: (data) => api.post('/teacher/notifications/send', data),\n// // };\n\n// // // Student endpoints\n// // export const studentAPI = {\n// //   getMyMarks: () => api.get('/student/my-marks'),\n// //   getMyAttendance: () => api.get('/student/my-attendance'),\n// //   getMyPerformance: () => api.get('/student/my-performance'),\n// //   getMyNotifications: () => api.get('/student/my-notifications'),\n// //   markNotificationRead: (id) => api.put(`/student/notifications/${id}/read`),\n// // };\n\n// // // Parent endpoints\n// // export const parentAPI = {\n// //   getMyChildren: () => api.get('/parent/my-children'),\n// //   getChildMarks: (studentId) => api.get(`/parent/child-marks/${studentId}`),\n// //   getChildAttendance: (studentId) => api.get(`/parent/child-attendance/${studentId}`),\n// //   getChildPerformance: (studentId) => api.get(`/parent/child-performance/${studentId}`),\n// //   getMyNotifications: () => api.get('/parent/my-notifications'),\n// //   markNotificationRead: (id) => api.put(`/parent/notifications/${id}/read`),\n// // };\n\n// // // ML endpoints\n// // export const mlAPI = {\n// //   trainModel: () => api.post('/ml/train'),\n// //   predictPerformance: (studentId) => api.get(`/ml/predict/${studentId}`),\n// //   getWeakStudents: () => api.get('/ml/weak-students'),\n// //   getClassPredictions: (classId) => api.get(`/ml/class-predictions/${classId}`),\n// // };\n\n// // export default api;\n// // frontend/src/api.js\n// // import axios from \"axios\";\n\n// // const API_BASE_URL =\n// //   process.env.REACT_APP_API_URL || \"http://127.0.0.1:5000/api\";\n\n// // src/api.js - DEBUG VERSION (temporary)\n// api.interceptors.response.use(\n//   (response) => response,\n//   // (error) => {\n//   //   console.error('ðŸ”´ API ERROR:', {\n//   //     status: error.response?.status,\n//   //     url: error.config?.url,\n//   //     message: error.response?.data?.error || error.message\n//   //   });\n    \n//   //   const isUnauthorized = error.response?.status === 401;\n//   //   const isLoginRequest = error.config?.url?.includes('/auth/login');\n    \n//   //   if (isUnauthorized && !isLoginRequest) {\n//   //     console.error('ðŸš« 401 DETECTED â†’ Clearing session');\n//   //     localStorage.removeItem('token');\n//   //     localStorage.removeItem('user');\n      \n//   //     if (window.location.pathname !== '/login') {\n//   //       window.location.href = '/login';\n//   //     }\n//   //   }\n    \n//   //   return Promise.reject(error);\n//   // }\n// );\n\n// // Request interceptor DEBUG\n// api.interceptors.request.use((config) => {\n//   const token = localStorage.getItem(\"token\");\n//   console.log('ðŸš€ REQUEST:', config.url, \n//     token ? `Token OK (${token.slice(0,20)}...)` : 'âŒ NO TOKEN');\n  \n//   if (token) {\n//     config.headers.Authorization = `Bearer ${token}`;\n//   }\n//   return config;\n// });\n\n\n\n// // // Create axios instance\n// // const api = axios.create({\n// //   baseURL: API_BASE_URL,\n// //   headers: {\n// //     \"Content-Type\": \"application/json\",\n// //   },\n// // });\n\n// // // Request interceptor â€“ attach token\n// // // api.interceptors.request.use((config) => {\n// // //   const token = localStorage.getItem(\"token\");\n// // //   console.log(`ðŸ” ${config.url} Token:`, token ? \"âœ…\" : \"âŒ\");  // DEBUG\n// // //   if (token) {\n// // //     config.headers.Authorization = `Bearer ${token}`;\n// // //   }\n// // //   return config;\n// // // });\n// // api.interceptors.request.use((config) => {\n// //   const token = localStorage.getItem(\"token\");\n// //   console.log(\"ðŸš€\", config.url, token ? \"âœ… TOKEN\" : \"âŒ NO TOKEN\");\n// //   if (token) config.headers.Authorization = `Bearer ${token}`;\n// //   return config;\n// // });\n\n\n// // // Response interceptor â€“ handle 401\n// // api.interceptors.response.use(\n// //   (response) => response,\n// //   (error) => {\n// //     const isUnauthorized = error.response?.status === 401;\n// //     const isLoginRequest = error.config?.url?.includes(\"/auth/login\");\n\n// //     if (isUnauthorized && !isLoginRequest) {\n// //       localStorage.removeItem(\"token\");\n// //       localStorage.removeItem(\"user\");\n// //       if (window.location.pathname !== \"/\") {\n// //         window.location.href = \"/\";\n// //       }\n// //     }\n// //     return Promise.reject(error);\n// //   }\n// // );\n\n// // ===== Auth endpoints =====\n// export const authAPI = {\n//   login: (email, password) => api.post(\"/auth/login\", { email, password }),\n//   getCurrentUser: () => api.get(\"/auth/me\"),\n//   changePassword: (oldPassword, newPassword) =>\n//     api.post(\"/auth/change-password\", {\n//       old_password: oldPassword,\n//       new_password: newPassword,\n//     }),\n// };\n\n// // ===== Admin endpoints =====\n// // export const adminAPI = {\n// //   getUsers: () => api.get(\"/admin/users\"),\n// //   createUser: (data) => api.post(\"/admin/users\", data),\n// //   deleteUser: (id) => api.delete(`/admin/users/${id}`),\n\n// //   getStudents: () => api.get(\"/admin/students\"),\n// //   createStudent: (data) => api.post(\"/admin/students\", data),\n// //   updateStudent: (id, data) => api.put(`/admin/students/${id}`, data),\n\n// //   getTeachers: () => api.get(\"/admin/teachers\"),\n// //   createTeacher: (data) => api.post(\"/admin/teachers\", data),\n\n// //   getParents: () => api.get(\"/admin/parents\"),\n// //   createParent: (data) => api.post(\"/admin/parents\", data),\n\n// //   getClasses: () => api.get(\"/admin/classes\"),\n// //   createClass: (data) => api.post(\"/admin/classes\", data),\n\n// //   getSubjects: (classId) =>\n// //     api.get(\"/admin/subjects\", { params: { class_id: classId } }),\n// //   createSubject: (data) => api.post(\"/admin/subjects\", data),\n// // };\n// // Add these CRUD methods\n// export const adminAPI = {\n//   // ... existing GET methods\n//   getUsers: () => api.get(\"/admin/users\"),\n//   createUser: (data) => api.post(\"/admin/users\", data),\n//   deleteUser: (id) => api.delete(`/admin/users/${id}`),\n\n//   getStudents: () => api.get(\"/admin/students\"),\n//   createStudent: (data) => api.post(\"/admin/students\", data),\n//   updateStudent: (id, data) => api.put(`/admin/students/${id}`, data),\n\n//   getTeachers: () => api.get(\"/admin/teachers\"),\n//   createTeacher: (data) => api.post(\"/admin/teachers\", data),\n\n//   getParents: () => api.get(\"/admin/parents\"),\n//   createParent: (data) => api.post(\"/admin/parents\", data),\n\n//   getClasses: () => api.get(\"/admin/classes\"),\n//   createClass: (data) => api.post(\"/admin/classes\", data),\n\n//   getSubjects: (classId) =>\n//     api.get(\"/admin/subjects\", { params: { class_id: classId } }),\n//   createSubject: (data) => api.post(\"/admin/subjects\", data),\n  \n//   // CREATE\n//   createStudent: (data) => api.post('/admin/students', data),\n//   createTeacher: (data) => api.post('/admin/teachers', data),\n//   createParent: (data) => api.post('/admin/parents', data),\n//   createClass: (data) => api.post('/admin/classes', data),\n  \n//   // UPDATE\n//   updateStudent: (id, data) => api.put(`/admin/students/${id}`, data),\n//   updateTeacher: (id, data) => api.put(`/admin/teachers/${id}`, data),\n//   updateParent: (id, data) => api.put(`/admin/parents/${id}`, data),\n//   updateClass: (id, data) => api.put(`/admin/classes/${id}`, data),\n  \n//   // DELETE\n//   deleteStudent: (id) => api.delete(`/admin/students/${id}`),\n//   deleteTeacher: (id) => api.delete(`/admin/teachers/${id}`),\n//   deleteParent: (id) => api.delete(`/admin/parents/${id}`),\n//   deleteClass: (id) => api.delete(`/admin/classes/${id}`),\n// };\n\n\n// // ===== Teacher endpoints =====\n// export const teacherAPI = {\n//   getMarks: (params) => api.get(\"/teacher/marks\", { params }),\n//   addMarks: (data) => api.post(\"/teacher/marks\", data),\n//   updateMarks: (id, data) => api.put(`/teacher/marks/${id}`, data),\n//   deleteMarks: (id) => api.delete(`/teacher/marks/${id}`),\n\n//   getAttendance: (params) => api.get(\"/teacher/attendance\", { params }),\n//   markAttendance: (data) => api.post(\"/teacher/attendance\", data),\n//   getAttendanceSummary: (studentId) =>\n//     api.get(`/teacher/attendance/summary/${studentId}`),\n\n//   getClassPerformance: (classId) =>\n//     api.get(`/teacher/performance/class/${classId}`),\n//   getSubjectPerformance: (subjectId) =>\n//     api.get(`/teacher/performance/subject/${subjectId}`),\n\n//   sendNotification: (data) => api.post(\"/teacher/notifications/send\", data),\n// };\n\n// // ===== Student endpoints =====\n// export const studentAPI = {\n//   getMyMarks: () => api.get(\"/student/my-marks\"),\n//   getMyAttendance: () => api.get(\"/student/my-attendance\"),\n//   getMyPerformance: () => api.get(\"/student/my-performance\"),\n//   getMyNotifications: () => api.get(\"/student/my-notifications\"),\n//   markNotificationRead: (id) =>\n//     api.put(`/student/notifications/${id}/read`),\n// };\n\n// // ===== Parent endpoints =====\n// export const parentAPI = {\n//   getMyChildren: () => api.get(\"/parent/my-children\"),\n//   getChildMarks: (studentId) =>\n//     api.get(`/parent/child-marks/${studentId}`),\n//   getChildAttendance: (studentId) =>\n//     api.get(`/parent/child-attendance/${studentId}`),\n//   getChildPerformance: (studentId) =>\n//     api.get(`/parent/child-performance/${studentId}`),\n//   getMyNotifications: () => api.get(\"/parent/my-notifications\"),\n//   markNotificationRead: (id) =>\n//     api.put(`/parent/notifications/${id}/read`),\n// };\n\n// // ===== ML endpoints =====\n// export const mlAPI = {\n//   trainModel: () => api.post(\"/ml/train\"),\n//   predictPerformance: (studentId) =>\n//     api.get(`/ml/predict/${studentId}`),\n//   getWeakStudents: () => api.get(\"/ml/weak-students\"),\n//   getClassPredictions: (classId) =>\n//     api.get(`/ml/class-predictions/${classId}`),\n// };\n// // api.js\n// export const cgpaAPI = {\n//   calculate: (data) => api.post(\"/student/calculate-cgpa\", data),\n// };\n\n// export default api;\n\n// frontend/src/api.js - COMPLETE FIXED VERSION\nimport axios from 'axios';\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://127.0.0.1:5000/api';\n\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Request interceptor\napi.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem(\"token\");\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => Promise.reject(error)\n);\n\n// Response interceptor\napi.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    if (error.response?.status === 401 && !error.config?.url?.includes('/auth/login')) {\n      localStorage.removeItem('token');\n      localStorage.removeItem('user');\n      if (window.location.pathname !== '/login') {\n        window.location.href = '/login';\n      }\n    }\n    return Promise.reject(error);\n  }\n);\n\n// ===== AUTH API =====\nexport const authAPI = {\n  login: (email, password) => api.post('/auth/login', { email, password }),\n  getCurrentUser: () => api.get('/auth/me'),\n  changePassword: (oldPassword, newPassword) =>\n    api.post('/auth/change-password', { old_password: oldPassword, new_password: newPassword }),\n};\n\n// ===== ADMIN API (FULL CRUD) =====\nexport const adminAPI = {\n  getUsers: () => api.get('/admin/users'),\n  createUser: (data) => api.post('/admin/users', data),\n  updateUser: (id, data) => api.put(`/admin/users/${id}`, data),\n  deleteUser: (id) => api.delete(`/admin/users/${id}`),\n  \n  getStudents: () => api.get('/admin/students'),\n  createStudent: (data) => api.post('/admin/students', data),\n  updateStudent: (id, data) => api.put(`/admin/students/${id}`, data),\n  deleteStudent: (id) => api.delete(`/admin/students/${id}`),\n  \n  getTeachers: () => api.get('/admin/teachers'),\n  createTeacher: (data) => api.post('/admin/teachers', data),\n  updateTeacher: (id, data) => api.put(`/admin/teachers/${id}`, data),\n  deleteTeacher: (id) => api.delete(`/admin/teachers/${id}`),\n  \n  getParents: () => api.get('/admin/parents'),\n  createParent: (data) => api.post('/admin/parents', data),\n  updateParent: (id, data) => api.put(`/admin/parents/${id}`, data),\n  deleteParent: (id) => api.delete(`/admin/parents/${id}`),\n  \n  getClasses: () => api.get('/admin/classes'),\n  createClass: (data) => api.post('/admin/classes', data),\n  updateClass: (id, data) => api.put(`/admin/classes/${id}`, data),\n  deleteClass: (id) => api.delete(`/admin/classes/${id}`),\n  \n  getSubjects: (classId) => api.get('/admin/subjects', { params: { class_id: classId } }),\n  createSubject: (data) => api.post('/admin/subjects', data),\n};\n\n// ===== TEACHER API =====\nexport const teacherAPI = {\n  getMarks: (params) => api.get('/teacher/marks', { params }),\n  addMarks: (data) => api.post('/teacher/marks', data),\n  updateMarks: (id, data) => api.put(`/teacher/marks/${id}`, data),\n  deleteMarks: (id) => api.delete(`/teacher/marks/${id}`),\n  \n  getAttendance: (params) => api.get('/teacher/attendance', { params }),\n  markAttendance: (data) => api.post('/teacher/attendance', data),\n  getAttendanceSummary: (studentId) => api.get(`/teacher/attendance/summary/${studentId}`),\n  \n  getClassPerformance: (classId) => api.get(`/teacher/performance/class/${classId}`),\n  getSubjectPerformance: (subjectId) => api.get(`/teacher/performance/subject/${subjectId}`),\n  \n  sendNotification: (data) => api.post('/teacher/notifications/send', data),\n};\n\n// ===== STUDENT API =====\nexport const studentAPI = {\n  getMyMarks: () => api.get('/student/my-marks'),\n  getMyAttendance: () => api.get('/student/my-attendance'),\n  getMyPerformance: () => api.get('/student/my-performance'),\n  getMyNotifications: () => api.get('/student/my-notifications'),\n  markNotificationRead: (id) => api.put(`/student/notifications/${id}/read`),\n};\n\n// ===== PARENT API =====\nexport const parentAPI = {\n  getMyChildren: () => api.get('/parent/my-children'),\n  getChildMarks: (studentId) => api.get(`/parent/child-marks/${studentId}`),\n  getChildAttendance: (studentId) => api.get(`/parent/child-attendance/${studentId}`),\n  getChildPerformance: (studentId) => api.get(`/parent/child-performance/${studentId}`),\n  getMyNotifications: () => api.get('/parent/my-notifications'),\n  markNotificationRead: (id) => api.put(`/parent/notifications/${id}/read`),\n};\n\n// ===== ML API =====\nexport const mlAPI = {\n  trainModel: () => api.post('/ml/train'),\n  predictPerformance: (studentId) => api.get(`/ml/predict/${studentId}`),\n  getWeakStudents: () => api.get('/ml/weak-students'),\n  getClassPredictions: (classId) => api.get(`/ml/class-predictions/${classId}`),\n};\n\n// ðŸ”¥ CGPA API - PERFECT MATCH FOR YOUR FLASK BACKEND\nexport const cgpaAPI = {\n  calculateStudentCGPA: (data) => api.post('/student/calculate-cgpa', data),\n  // data = { student_id: 123, marks: {\"HS3152\": \"A\"} }\n};\n\n// ðŸ”¥ DEFAULT EXPORT (for backward compatibility)\nexport default {\n  ...authAPI,\n  ...adminAPI,\n  ...teacherAPI,\n  ...studentAPI,\n  ...parentAPI,\n  ...mlAPI,\n  ...cgpaAPI,\n  api // Raw axios instance\n};\n"],"mappings":"AAAA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,YAAY,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,2BAA2B;AAEjF,MAAMC,GAAG,GAAGL,KAAK,CAACM,MAAM,CAAC;EACvBC,OAAO,EAAEN,YAAY;EACrBO,OAAO,EAAE;IACP,cAAc,EAAE;EAClB;AACF,CAAC,CA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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}