{"ast":null,"code":"// // frontend/src/dashboards/AdminDashboard.js - COMPLETE FIXED VERSION\n// import React, { useEffect, useState } from \"react\";\n// import { adminAPI } from \"../api\";\n// import \"./AdminDashboard.css\";\n\n// function AdminDashboard({ user, onLogout }) {\n//   const [stats, setStats] = useState({\n//     totalStudents: 0,\n//     totalTeachers: 0,\n//     totalParents: 0,\n//     totalClasses: 0,\n//   });\n//   const [students, setStudents] = useState([]);\n//   const [teachers, setTeachers] = useState([]);\n//   const [parents, setParents] = useState([]);\n//   const [classes, setClasses] = useState([]);\n//   const [loading, setLoading] = useState(true);\n//   const [tab, setTab] = useState(\"overview\");\n//   const [error, setError] = useState(\"\");\n\n//   // âœ… FIXED: loadData extracted for Refresh button\n//   const loadData = async () => {\n//     try {\n//       setLoading(true);\n//       setError(\"\");\n\n//       const [studentsRes, teachersRes, parentsRes, classesRes] =\n//         await Promise.all([\n//           adminAPI.getStudents(),\n//           adminAPI.getTeachers(),\n//           adminAPI.getParents(),\n//           adminAPI.getClasses(),\n//         ]);\n\n//       const studentsData = studentsRes.data || [];\n//       const teachersData = teachersRes.data || [];\n//       const parentsData = parentsRes.data || [];\n//       const classesData = classesRes.data || [];\n\n//       setStudents(studentsData);\n//       setTeachers(teachersData);\n//       setParents(parentsData);\n//       setClasses(classesData);\n//       console.log(studentsData)\n//       console.log(teachersData)\n//       console.log(parentsData)\n//       console.log(classesData)\n//       setStats({\n//         totalStudents: studentsData.length,\n//         totalTeachers: teachersData.length,\n//         totalParents: parentsData.length,\n//         totalClasses: classesData.length,\n//       });\n//     } catch (err) {\n//       console.error(err);\n//       setError(\"Failed to load admin data\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   // âœ… Simplified useEffect\n//   useEffect(() => {\n//     loadData();\n//   }, []);\n\n//   const renderOverview = () => (\n//     <div className=\"admin-overview-grid\">\n//       <div className=\"stat-card\">\n//         <h3>Total Students</h3>\n//         <p>{stats.totalStudents}</p>\n//       </div>\n//       <div className=\"stat-card\">\n//         <h3>Total Teachers</h3>\n//         <p>{stats.totalTeachers}</p>\n//       </div>\n//       <div className=\"stat-card\">\n//         <h3>Total Parents</h3>\n//         <p>{stats.totalParents}</p>\n//       </div>\n//       <div className=\"stat-card\">\n//         <h3>Total Classes</h3>\n//         <p>{stats.totalClasses}</p>\n//       </div>\n//       {/* âœ… REFRESH BUTTON - Works now! */}\n//       <div className=\"stat-card full-width\">\n//         <button onClick={loadData} className=\"btn btn-primary\">\n//           ðŸ”„ Refresh Data\n//         </button>\n//       </div>\n//     </div>\n//   );\n\n//   const renderStudents = () => (\n//     <div className=\"table-wrapper\">\n//       <h3>Students</h3>\n//       <table className=\"data-table\">\n//         <thead>\n//           <tr>\n//             <th>Name</th>\n//             <th>Class</th>\n//             <th>Roll</th>\n//             <th>Email</th>\n//           </tr>\n//         </thead>\n//         <tbody>\n//           {students.length === 0 && (\n//             <tr>\n//               <td colSpan={4}>No students found</td>\n//             </tr>\n//           )}\n//           {students.map((s) => (\n//             <tr key={s.id}>\n//               <td>{`${s.first_name || \"\"} ${s.last_name || \"\"}`.trim()}</td>\n//               <td>\n//                 {s.class_name}\n//                 {s.section ? ` - ${s.section}` : \"\"}\n//               </td>\n//               <td>{s.roll_number}</td>\n//               <td>{s.email}</td>\n//             </tr>\n//           ))}\n//         </tbody>\n//       </table>\n//     </div>\n//   );\n\n//   const renderTeachers = () => (\n//     <div className=\"table-wrapper\">\n//       <h3>Teachers</h3>\n//       <table className=\"data-table\">\n//         <thead>\n//           <tr>\n//             <th>Name</th>\n//             <th>Department</th>\n//             <th>Phone</th>\n//             <th>Email</th>\n//           </tr>\n//         </thead>\n//         <tbody>\n//           {teachers.length === 0 && (\n//             <tr>\n//               <td colSpan={4}>No teachers found</td>\n//             </tr>\n//           )}\n//           {teachers.map((t) => (\n//             <tr key={t.id}>\n//               <td>{`${t.first_name || \"\"} ${t.last_name || \"\"}`.trim()}</td>\n//               <td>{t.department}</td>\n//               <td>{t.phone}</td>\n//               <td>{t.email}</td>\n//             </tr>\n//           ))}\n//         </tbody>\n//       </table>\n//     </div>\n//   );\n\n//   const renderParents = () => (\n//     <div className=\"table-wrapper\">\n//       <h3>Parents</h3>\n//       <table className=\"data-table\">\n//         <thead>\n//           <tr>\n//             <th>Name</th>\n//             <th>Children</th>\n//             <th>Phone</th>\n//             <th>Email</th>\n//           </tr>\n//         </thead>\n//         <tbody>\n//           {parents.length === 0 && (\n//             <tr>\n//               <td colSpan={4}>No parents found</td>\n//             </tr>\n//           )}\n//           {parents.map((p) => (\n//             <tr key={p.id}>\n//               <td>{`${p.first_name || \"\"} ${p.last_name || \"\"}`.trim()}</td>\n//               <td>\n//                 {Array.isArray(p.children) && p.children.length > 0\n//                   ? p.children.map((c) => c.name).join(\", \")\n//                   : \"â€”\"}\n//               </td>\n//               <td>{p.phone}</td>\n//               <td>{p.email}</td>\n//             </tr>\n//           ))}\n//         </tbody>\n//       </table>\n//     </div>\n//   );\n\n//   const renderClasses = () => (\n//     <div className=\"table-wrapper\">\n//       <h3>Classes</h3>\n//       <table className=\"data-table\">\n//         <thead>\n//           <tr>\n//             <th>Class</th>\n//             <th>Section</th>\n//             <th>Teacher</th>\n//             <th>Students</th>\n//           </tr>\n//         </thead>\n//         <tbody>\n//           {classes.length === 0 && (\n//             <tr>\n//               <td colSpan={4}>No classes found</td>\n//             </tr>\n//           )}\n//           {classes.map((c) => (\n//             <tr key={c.id}>\n//               <td>{c.class_name}</td>\n//               <td>{c.section}</td>\n//               <td>{c.teacher_name || \"Unassigned\"}</td>\n//               <td>{c.student_count}</td>\n//             </tr>\n//           ))}\n//         </tbody>\n//       </table>\n//     </div>\n//   );\n\n//   // if (loading) {\n//   //   return (\n//   //     <div className=\"dashboard-container\">\n//   //       <div className=\"dashboard-header\">\n//   //         <h2>Admin Dashboard</h2>\n//   //       </div>\n//   //       <p>Loading...</p>\n//   //     </div>\n//   //   );\n//   // }\n//   if (loading) {\n//   return (\n//     <div className=\"dashboard-container\">\n//       <div className=\"dashboard-header\">\n//         <h2>Admin Dashboard</h2>\n//       </div>\n//       <div className=\"skeleton-loader\">\n//         <div className=\"admin-overview-grid\">\n//           <div className=\"skeleton-stat\"></div>\n//           <div className=\"skeleton-stat\"></div>\n//           <div className=\"skeleton-stat\"></div>\n//           <div className=\"skeleton-stat\"></div>\n//         </div>\n//         <div className=\"skeleton-table\">\n//           <div className=\"skeleton-row\"></div>\n//           <div className=\"skeleton-row\"></div>\n//           <div className=\"skeleton-row\"></div>\n//         </div>\n//       </div>\n//     </div>\n//   );\n// }\n\n//   return (\n//     <div className=\"dashboard-container\">\n//       <div className=\"dashboard-header\">\n//         <h2>Admin Dashboard</h2>\n//         <div className=\"dashboard-user-info\">\n//           <span>{user?.email}</span>\n//           <button onClick={onLogout} className=\"btn btn-secondary\">\n//             Logout\n//           </button>\n//         </div>\n//       </div>\n\n//       {error && <div className=\"error-banner\">{error}</div>}\n\n//       <div className=\"dashboard-tabs\">\n//         <button\n//           className={tab === \"overview\" ? \"tab active\" : \"tab\"}\n//           onClick={() => setTab(\"overview\")}\n//         >\n//           Overview\n//         </button>\n//         <button\n//           className={tab === \"students\" ? \"tab active\" : \"tab\"}\n//           onClick={() => setTab(\"students\")}\n//         >\n//           Students\n//         </button>\n//         <button\n//           className={tab === \"teachers\" ? \"tab active\" : \"tab\"}\n//           onClick={() => setTab(\"teachers\")}\n//         >\n//           Teachers\n//         </button>\n//         <button\n//           className={tab === \"parents\" ? \"tab active\" : \"tab\"}\n//           onClick={() => setTab(\"parents\")}\n//         >\n//           Parents\n//         </button>\n//         <button\n//           className={tab === \"classes\" ? \"tab active\" : \"tab\"}\n//           onClick={() => setTab(\"classes\")}\n//         >\n//           Classes\n//         </button>\n//       </div>\n\n//       <div className=\"dashboard-content\">\n//         {tab === \"overview\" && renderOverview()}\n//         {tab === \"students\" && renderStudents()}\n//         {tab === \"teachers\" && renderTeachers()}\n//         {tab === \"parents\" && renderParents()}\n//         {tab === \"classes\" && renderClasses()}\n//       </div>\n//     </div>\n//   );\n// }\n\n// export default AdminDashboard;","map":{"version":3,"names":[],"sources":["/Users/jeyamurugan/Downloads/student/frontend/src/dashboards/AdminDashboard.js"],"sourcesContent":["// // frontend/src/dashboards/AdminDashboard.js - COMPLETE FIXED VERSION\n// import React, { useEffect, useState } from \"react\";\n// import { adminAPI } from \"../api\";\n// import \"./AdminDashboard.css\";\n\n// function AdminDashboard({ user, onLogout }) {\n//   const [stats, setStats] = useState({\n//     totalStudents: 0,\n//     totalTeachers: 0,\n//     totalParents: 0,\n//     totalClasses: 0,\n//   });\n//   const [students, setStudents] = useState([]);\n//   const [teachers, setTeachers] = useState([]);\n//   const [parents, setParents] = useState([]);\n//   const [classes, setClasses] = useState([]);\n//   const [loading, setLoading] = useState(true);\n//   const [tab, setTab] = useState(\"overview\");\n//   const [error, setError] = useState(\"\");\n\n//   // âœ… FIXED: loadData extracted for Refresh button\n//   const loadData = async () => {\n//     try {\n//       setLoading(true);\n//       setError(\"\");\n\n//       const [studentsRes, teachersRes, parentsRes, classesRes] =\n//         await Promise.all([\n//           adminAPI.getStudents(),\n//           adminAPI.getTeachers(),\n//           adminAPI.getParents(),\n//           adminAPI.getClasses(),\n//         ]);\n\n//       const studentsData = studentsRes.data || [];\n//       const teachersData = teachersRes.data || [];\n//       const parentsData = parentsRes.data || [];\n//       const classesData = classesRes.data || [];\n\n//       setStudents(studentsData);\n//       setTeachers(teachersData);\n//       setParents(parentsData);\n//       setClasses(classesData);\n//       console.log(studentsData)\n//       console.log(teachersData)\n//       console.log(parentsData)\n//       console.log(classesData)\n//       setStats({\n//         totalStudents: studentsData.length,\n//         totalTeachers: teachersData.length,\n//         totalParents: parentsData.length,\n//         totalClasses: classesData.length,\n//       });\n//     } catch (err) {\n//       console.error(err);\n//       setError(\"Failed to load admin data\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n  \n//   // âœ… Simplified useEffect\n//   useEffect(() => {\n//     loadData();\n//   }, []);\n\n//   const renderOverview = () => (\n//     <div className=\"admin-overview-grid\">\n//       <div className=\"stat-card\">\n//         <h3>Total Students</h3>\n//         <p>{stats.totalStudents}</p>\n//       </div>\n//       <div className=\"stat-card\">\n//         <h3>Total Teachers</h3>\n//         <p>{stats.totalTeachers}</p>\n//       </div>\n//       <div className=\"stat-card\">\n//         <h3>Total Parents</h3>\n//         <p>{stats.totalParents}</p>\n//       </div>\n//       <div className=\"stat-card\">\n//         <h3>Total Classes</h3>\n//         <p>{stats.totalClasses}</p>\n//       </div>\n//       {/* âœ… REFRESH BUTTON - Works now! */}\n//       <div className=\"stat-card full-width\">\n//         <button onClick={loadData} className=\"btn btn-primary\">\n//           ðŸ”„ Refresh Data\n//         </button>\n//       </div>\n//     </div>\n//   );\n\n//   const renderStudents = () => (\n//     <div className=\"table-wrapper\">\n//       <h3>Students</h3>\n//       <table className=\"data-table\">\n//         <thead>\n//           <tr>\n//             <th>Name</th>\n//             <th>Class</th>\n//             <th>Roll</th>\n//             <th>Email</th>\n//           </tr>\n//         </thead>\n//         <tbody>\n//           {students.length === 0 && (\n//             <tr>\n//               <td colSpan={4}>No students found</td>\n//             </tr>\n//           )}\n//           {students.map((s) => (\n//             <tr key={s.id}>\n//               <td>{`${s.first_name || \"\"} ${s.last_name || \"\"}`.trim()}</td>\n//               <td>\n//                 {s.class_name}\n//                 {s.section ? ` - ${s.section}` : \"\"}\n//               </td>\n//               <td>{s.roll_number}</td>\n//               <td>{s.email}</td>\n//             </tr>\n//           ))}\n//         </tbody>\n//       </table>\n//     </div>\n//   );\n\n//   const renderTeachers = () => (\n//     <div className=\"table-wrapper\">\n//       <h3>Teachers</h3>\n//       <table className=\"data-table\">\n//         <thead>\n//           <tr>\n//             <th>Name</th>\n//             <th>Department</th>\n//             <th>Phone</th>\n//             <th>Email</th>\n//           </tr>\n//         </thead>\n//         <tbody>\n//           {teachers.length === 0 && (\n//             <tr>\n//               <td colSpan={4}>No teachers found</td>\n//             </tr>\n//           )}\n//           {teachers.map((t) => (\n//             <tr key={t.id}>\n//               <td>{`${t.first_name || \"\"} ${t.last_name || \"\"}`.trim()}</td>\n//               <td>{t.department}</td>\n//               <td>{t.phone}</td>\n//               <td>{t.email}</td>\n//             </tr>\n//           ))}\n//         </tbody>\n//       </table>\n//     </div>\n//   );\n\n//   const renderParents = () => (\n//     <div className=\"table-wrapper\">\n//       <h3>Parents</h3>\n//       <table className=\"data-table\">\n//         <thead>\n//           <tr>\n//             <th>Name</th>\n//             <th>Children</th>\n//             <th>Phone</th>\n//             <th>Email</th>\n//           </tr>\n//         </thead>\n//         <tbody>\n//           {parents.length === 0 && (\n//             <tr>\n//               <td colSpan={4}>No parents found</td>\n//             </tr>\n//           )}\n//           {parents.map((p) => (\n//             <tr key={p.id}>\n//               <td>{`${p.first_name || \"\"} ${p.last_name || \"\"}`.trim()}</td>\n//               <td>\n//                 {Array.isArray(p.children) && p.children.length > 0\n//                   ? p.children.map((c) => c.name).join(\", \")\n//                   : \"â€”\"}\n//               </td>\n//               <td>{p.phone}</td>\n//               <td>{p.email}</td>\n//             </tr>\n//           ))}\n//         </tbody>\n//       </table>\n//     </div>\n//   );\n\n//   const renderClasses = () => (\n//     <div className=\"table-wrapper\">\n//       <h3>Classes</h3>\n//       <table className=\"data-table\">\n//         <thead>\n//           <tr>\n//             <th>Class</th>\n//             <th>Section</th>\n//             <th>Teacher</th>\n//             <th>Students</th>\n//           </tr>\n//         </thead>\n//         <tbody>\n//           {classes.length === 0 && (\n//             <tr>\n//               <td colSpan={4}>No classes found</td>\n//             </tr>\n//           )}\n//           {classes.map((c) => (\n//             <tr key={c.id}>\n//               <td>{c.class_name}</td>\n//               <td>{c.section}</td>\n//               <td>{c.teacher_name || \"Unassigned\"}</td>\n//               <td>{c.student_count}</td>\n//             </tr>\n//           ))}\n//         </tbody>\n//       </table>\n//     </div>\n//   );\n\n//   // if (loading) {\n//   //   return (\n//   //     <div className=\"dashboard-container\">\n//   //       <div className=\"dashboard-header\">\n//   //         <h2>Admin Dashboard</h2>\n//   //       </div>\n//   //       <p>Loading...</p>\n//   //     </div>\n//   //   );\n//   // }\n//   if (loading) {\n//   return (\n//     <div className=\"dashboard-container\">\n//       <div className=\"dashboard-header\">\n//         <h2>Admin Dashboard</h2>\n//       </div>\n//       <div className=\"skeleton-loader\">\n//         <div className=\"admin-overview-grid\">\n//           <div className=\"skeleton-stat\"></div>\n//           <div className=\"skeleton-stat\"></div>\n//           <div className=\"skeleton-stat\"></div>\n//           <div className=\"skeleton-stat\"></div>\n//         </div>\n//         <div className=\"skeleton-table\">\n//           <div className=\"skeleton-row\"></div>\n//           <div className=\"skeleton-row\"></div>\n//           <div className=\"skeleton-row\"></div>\n//         </div>\n//       </div>\n//     </div>\n//   );\n// }\n\n\n//   return (\n//     <div className=\"dashboard-container\">\n//       <div className=\"dashboard-header\">\n//         <h2>Admin Dashboard</h2>\n//         <div className=\"dashboard-user-info\">\n//           <span>{user?.email}</span>\n//           <button onClick={onLogout} className=\"btn btn-secondary\">\n//             Logout\n//           </button>\n//         </div>\n//       </div>\n\n//       {error && <div className=\"error-banner\">{error}</div>}\n\n//       <div className=\"dashboard-tabs\">\n//         <button\n//           className={tab === \"overview\" ? \"tab active\" : \"tab\"}\n//           onClick={() => setTab(\"overview\")}\n//         >\n//           Overview\n//         </button>\n//         <button\n//           className={tab === \"students\" ? \"tab active\" : \"tab\"}\n//           onClick={() => setTab(\"students\")}\n//         >\n//           Students\n//         </button>\n//         <button\n//           className={tab === \"teachers\" ? \"tab active\" : \"tab\"}\n//           onClick={() => setTab(\"teachers\")}\n//         >\n//           Teachers\n//         </button>\n//         <button\n//           className={tab === \"parents\" ? \"tab active\" : \"tab\"}\n//           onClick={() => setTab(\"parents\")}\n//         >\n//           Parents\n//         </button>\n//         <button\n//           className={tab === \"classes\" ? \"tab active\" : \"tab\"}\n//           onClick={() => setTab(\"classes\")}\n//         >\n//           Classes\n//         </button>\n//       </div>\n\n//       <div className=\"dashboard-content\">\n//         {tab === \"overview\" && renderOverview()}\n//         {tab === \"students\" && renderStudents()}\n//         {tab === \"teachers\" && renderTeachers()}\n//         {tab === \"parents\" && renderParents()}\n//         {tab === \"classes\" && renderClasses()}\n//       </div>\n//     </div>\n//   );\n// }\n\n// export default AdminDashboard;\n"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}